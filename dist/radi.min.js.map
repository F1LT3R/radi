{"version":3,"sources":["dist/radi.js"],"names":["global","factory","exports","module","define","amd","radi","this","STRIP_COMMENTS","FIND_L","RL","charCodeAt","RR","HASH","DOT","frozenState","clone","obj","i","ret","Object","prototype","toString","call","len","length","Array","hasOwnProperty","createElement","query","ns","ref","tag","id","className","mode","buffer","char","isHash","isDot","parseQuery","element","document","createElementNS","setAttribute","isArray","arg","arrayMods","v","s","defineProperties","reverse","value","bind","push","splice","pop","shift","ids","activeComponents","unmountAll","el","unmount","children","mountAll","mount","setStyle","view","arg1","arg2","self","getEl","isWatchable","cache","get","style","$e","on","path","e","undefined","isString","key","setAttr","source","prop","emit","isFunction","temp","parent","nodeType","a","isNumber","isNode","NW","isCondition","Condition","isComponent","__radi","text","str","createTextNode","radiArgs","args","appendChild","$render","__do","r","watch","b","parentNode","replaceChild","z","htmlCache","memoizeHTML","arguments","cloneNode","createDocumentFragment","extend","apply","concat","Component","o","name","state","props","actions","$view","SELF","populate","to","test","__path","defineProperty","ii","getOwnPropertyDescriptor","set","watcher","targ","handler","oldval","setter","newval","constructor","String","Error","__slice","slice","subscriptions","[object Object]","matcher","cbk","_base","evt","callbacks","subscription","_ref1","regexpSubscriptions","regexp","_i","_len","_ref","listeners","cbks","$id","$name","$state","$props","$actions","$html","Function","list","ll","cond","$link","console","log","onMount","onDestroy","p","k","warn","emptyNode","data","act","link","fragment","toplink","lastChild","parentElement","insertBefore","nextSibling","Math","abs","templink","previousSibling","removeChild","w","fn","txt","f","replace","trim","join","cases","els","cb","c","elseif","else","split","version","component","match","exec","output","cursor","n","index","all","input","_l","_r","found","substr","m","obs","last","newString","comp","where","getElementById","out","l","freeze","unfreeze"],"mappings":"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","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.radi = {})));\n}(this, (function (exports) { 'use strict';\n\nconst version = '0.1.0';\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar FIND_L = /\\bl\\(/g;\n\nvar RL = '('.charCodeAt(0);\nvar RR = ')'.charCodeAt(0);\nvar HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAGNAME = 0;\nvar ID = 1;\nvar CLASSNAME = 2;\n\nvar frozenState = false;\n\nvar isArray = function (o) { return Array.isArray(o) === true };\n\nfunction clone(obj) {\n\tvar i, ret;\n\tif (typeof obj === \"object\") {\n\t\tif (obj === null) return obj;\n\t\tif (Object.prototype.toString.call(obj) === \"[object Array]\") {\n\t\t\tvar len = obj.length;\n\t\t\tret = new Array(len);\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (typeof obj[i] === \"object\") {\n\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t} else {\n\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tret = {};\n\t\t\tfor (i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\tif (typeof(obj[i] === \"object\")) {\n\t\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tret = obj;\n\t}\n\n\treturn ret;\n}\n\nvar parseQuery = function (query) {\n\tvar tag = null;\n\tvar id = null;\n\tvar className = null;\n\tvar mode = TAGNAME;\n\tvar buffer = '';\n\n\tfor (var i = 0; i <= query.length; i++) {\n\t\tvar char = query.charCodeAt(i);\n\t\tvar isHash = char === HASH;\n\t\tvar isDot = char === DOT;\n\t\tvar isEnd = !char;\n\n\t\tif (isHash || isDot || isEnd) {\n\t\t\tif (mode === TAGNAME) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\ttag = 'div';\n\t\t\t\t} else {\n\t\t\t\t\ttag = buffer;\n\t\t\t\t}\n\t\t\t} else if (mode === ID) {\n\t\t\t\tid = buffer;\n\t\t\t} else {\n\t\t\t\tif (className) {\n\t\t\t\t\tclassName += ' ' + buffer;\n\t\t\t\t} else {\n\t\t\t\t\tclassName = buffer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isHash) {\n\t\t\t\tmode = ID;\n\t\t\t} else if (isDot) {\n\t\t\t\tmode = CLASSNAME;\n\t\t\t}\n\n\t\t\tbuffer = '';\n\t\t} else {\n\t\t\tbuffer += query[i];\n\t\t}\n\t}\n\n\treturn { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n\tvar ref = parseQuery(query);\n\tvar tag = ref.tag;\n\tvar id = ref.id;\n\tvar className = ref.className;\n\tvar element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n\tif (id) {\n\t\telement.id = id;\n\t}\n\n\tif (className) {\n\t\tif (ns) {\n\t\t\telement.setAttribute('class', className);\n\t\t} else {\n\t\t\telement.className = className;\n\t\t}\n\t}\n\n\treturn element;\n};\n\nif (!Array.isArray) {\n\tArray.isArray = function(arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\nvar arrayMods = function (v, s) {\n\tObject.defineProperties(v, {\n\t\treverse: { value: s.bind('reverse') },\n\t\tpush: { value: s.bind('push') },\n\t\tsplice: { value: s.bind('splice') },\n\t\tpop: { value: s.bind('pop') },\n\t\tshift: { value: s.bind('shift') }\n\t});\n};\n\n\nvar ids = 0;\nconst activeComponents = [];\n\nvar Radi = function(o) {\n\tvar SELF = {};\n\n\tvar populate = function populate(to, path) {\n\t\tif (typeof to !== 'object'\n\t\t\t|| !to\n\t\t\t|| /^this\\.\\$(?:view|props|actions|state|link|e|html)$/.test(path)) return false;\n\t  var ret = (typeof to.__path === 'undefined') ? Object.defineProperty(to, '__path', { value: path }) : false;\n\t  for (var ii in to) {\n\t    if (!Object.getOwnPropertyDescriptor(to, ii).set) {\n\t      if (typeof to[ii] === 'object') populate(to[ii], path + '.' + ii);\n\t      // Initiate watcher if not already watched\n\t      watcher(to, ii);\n\t      // Trigger changes for this path\n\t\t\t\tSELF.$e.emit(path + '.' + ii, to[ii]);\n\t    }\n\t  }\n\t\treturn ret\n\t};\n\n\tvar watcher = function watcher(targ, prop, handler) {\n\t  var oldval = targ[prop],\n\t    path = targ.__path + '.' + prop,\n\t    setter = function (newval) {\n\t      if (oldval !== newval) {\n\t        if (Array.isArray(oldval)) {\n\t\t\t\t\t\tvar ret;\n\t          if (this && this.constructor === String) {\n\t\t\t\t\t\t\tret = Array.prototype[this].apply(oldval, arguments);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toldval = newval;\n\t\t\t\t\t\t\tarrayMods(oldval, setter);\n\t          }\n\n\t\t\t\t\t\tpopulate(oldval, path);\n\t\t\t\t\t\tSELF.$e.emit(path, oldval);\n\t\t\t\t\t\treturn ret;\n\t        } else if (typeof newval === 'object') {\n\t\t\t\t\t\toldval = clone(newval);\n\t\t\t\t\t\tpopulate(oldval, path);\n\t\t\t\t\t\tSELF.$e.emit(path, oldval);\n\t        } else {\n\t          oldval = newval;\n\t\t\t\t\t\tpopulate(oldval, path);\n\t\t\t\t\t\tSELF.$e.emit(path, oldval);\n\t        }\n\t        return newval\n\t      } else {\n\t        return false\n\t      }\n\t    };\n\n\t  if (Array.isArray(oldval)) arrayMods(oldval, setter);\n\n\t  if (delete targ[prop]) {\n\t    Object.defineProperty(targ, prop, {\n\t      get: function () {\n\t        return oldval;\n\t      },\n\t      set: setter,\n\t      enumerable: true,\n\t      configurable: true\n\t    });\n\t  }\n\t};\n\n\tfor (var i in o.state) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tSELF[i] = o.state[i];\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write state for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\t// for (var i in o.props) {\n\t// \tif (typeof SELF[i] === 'undefined') {\n\t// \t\tif (isWatchable(o.props[i])) {\n\t// \t\t\tSELF[i] = o.props[i].get();\n\t// \t\t\to.props[i].watch(function (a) {\n\t// \t\t\t\tSELF[i] = a;\n\t// \t\t\t});\n\t// \t\t} else {\n\t// \t\t\tSELF[i] = o.props[i];\n\t// \t\t}\n\t// \t} else {\n\t// \t\tthrow new Error('[Radi.js] Err: Trying to write prop for reserved variable `' + i + '`');\n\t// \t}\n\t// }\n\n\tvar __slice = [].slice;\n\tSELF.$e = {\n\t\tsubscriptions: [],\n\t\ton(matcher, cbk) {\n\t\t\tvar _base, _ref, _ref1, _ref2;\n\n\t\t\tif ((_ref1 = this.subscriptions) == null) {\n\t\t\t\tthis.subscriptions = {};\n\t\t\t}\n\t\t\tif ((_ref2 = (_base = this.subscriptions)[matcher]) == null) {\n\t\t\t\t_base[matcher] = [];\n\t\t\t}\n\t\t\tthis.subscriptions[matcher].push(cbk);\n\n\t\t\treturn this;\n\t\t},\n\t\tlisteners(evt) {\n\t\t\tvar callbacks, key, subscription, _ref, _ref1;\n\n\t\t\tif ((_ref = this.subscriptions) == null) {\n\t\t\t\tthis.subscriptions = {};\n\t\t\t}\n\t\t\tcallbacks = this.subscriptions[evt] || [];\n\t\t\t_ref1 = this.regexpSubscriptions;\n\t\t\tfor (key in _ref1) {\n\t\t\t\tsubscription = _ref1[key];\n\t\t\t\tif (subscription.regexp.test(evt)) {\n\t\t\t\t\tcallbacks = callbacks.concat(subscription.callbacks);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn callbacks;\n\t\t},\n\t\temit() {\n\t\t\tvar args, cbk, evt, _i, _len, _ref;\n\n\t\t\tevt = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\t\t\t_ref = this.listeners(evt);\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tcbk = _ref[_i];\n\t\t\t\tcbk.call.apply(cbk, [this, evt].concat(__slice.call(args)));\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\toff(matcher, cbk) {\n\t\t\tvar c, cbks, i, _i, _len, _ref;\n\n\t\t\tif (matcher == null) {\n\t\t\t\tthis.subscriptions = {};\n\t\t\t\tthis.regexpSubscriptions = {};\n\t\t\t} else {\n\t\t\t\tif (cbk == null) {\n\t\t\t\t\tif ((_ref = this.subscriptions) != null) {\n\t\t\t\t\t\tdelete _ref[matcher];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcbks = this.subscriptions[matcher] || [];\n\t\t\t\t\tfor (i = _i = 0, _len = cbks.length; _i < _len; i = ++_i) {\n\t\t\t\t\t\tc = cbks[i];\n\t\t\t\t\t\tif (c === cbk) {\n\t\t\t\t\t\t\tcbks.splice(i, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t};\n\n\tpopulate(SELF, 'this');\n\n\tfor (var i in o.actions) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tSELF[i] = (function() {\n\t\t\t\tif (frozenState) return null\n\t\t\t\t// var old = clone(SELF)\n\t\t\t\treturn this.apply(SELF, arguments)\n\t\t\t\t// populateOne(SELF, 'this');\n\t\t\t\t// triggerChanges(old, SELF, 'this')\n\t\t\t\t// return b\n\t\t\t}).bind(o.actions[i]);\n\n\t\t\t// (function(i) {\n\t\t\t// \tObject.defineProperty(SELF[i], 'props', {\n\t\t\t// \t\tvalue() {\n\t\t\t// \t\t\tvar args = arguments;\n\t\t\t// \t\t\treturn function () { return (frozenState) ? function () {} : SELF[i].apply(SELF, args, arguments) }\n\t\t\t// \t\t}\n\t\t\t// \t});\n\t\t\t// })(i)\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Error: Trying to write action for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tSELF.$id = ids++;\n\tSELF.$name = o.name;\n\tSELF.$state = o.state || {};\n\tSELF.$props = o.props || {};\n\tSELF.$actions = o.actions || {};\n\tSELF.$html = document.createDocumentFragment();\n\n\tSELF.$view = new Function('r','list','ll','cond','return ' + o.$view)(\n\t\tr.bind(SELF), list.bind(SELF), ll.bind(SELF), cond.bind(SELF)\n\t);\n\n\tSELF.$link = SELF.$view();\n\tSELF.$html.appendChild(SELF.$link);\n\n\tSELF.$render = function() {\n\t\tSELF.mount();\n\t\treturn SELF.$html\n\t};\n\n\t// SELF.$html.destroy = function () {\n\t// \tconst oldRootElem = SELF.$link.parentElement;\n\t// \tconst newRootElem = oldRootElem.cloneNode(false);\n\t// \toldRootElem.parentNode.insertBefore(newRootElem, oldRootElem);\n\t// \tSELF.unmount();\n\t// \toldRootElem.parentNode.removeChild(oldRootElem);\n\t// }\n\n\tSELF.mount = function () {\n\t\tconsole.log('MOUNT', SELF.$name);\n\t\tif (typeof SELF.$actions.onMount === 'function') {\n\t\t\tSELF.$actions.onMount.call(SELF);\n\t\t}\n\t\tactiveComponents.push(SELF);\n\t};\n\n\tSELF.unmount = function () {\n\t\tconsole.log('UNMOUNT', SELF.$name);\n\t\tif (typeof SELF.$actions.onDestroy === 'function') {\n\t\t\tSELF.$actions.onDestroy.call(SELF);\n\t\t}\n\t\tfor (var i = 0; i < activeComponents.length; i++) {\n\t\t\tif (activeComponents[i].$id === SELF.$id) {\n\t\t\t\tactiveComponents.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn SELF.$link;\n\t};\n\n\tSELF.$link.unmount = SELF.unmount.bind(SELF);\n\tSELF.$link.mount = SELF.mount.bind(SELF);\n\n\treturn SELF\n};\n\nvar unmountAll = function unmountAll(el) {\n\tif (typeof el.unmount === 'function') el.unmount();\n\tif (el.children && el.children.length > 0) {\n\t\tfor (var i = 0; i < el.children.length; i++) {\n\t\t\tunmountAll(el.children[i]);\n\t\t}\n\t}\n};\n\nvar mountAll = function mountAll(el) {\n\tif (typeof el.mount === 'function') el.mount();\n\tif (el.children && el.children.length > 0) {\n\t\tfor (var i = 0; i < el.children.length; i++) {\n\t\t\tmountAll(el.children[i]);\n\t\t}\n\t}\n};\n\nvar radiMutate = function (c) {\n\t// window.requestAnimationFrame(() => {\n\t\t// window.requestAnimationFrame(() => {\n\t\t\tc();\n\t\t// });\n\t// });\n};\n\nvar setStyle = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (isWatchable(arg2)) {\n\t\tvar cache = arg2.get();\n\t\tel.style[arg1] = cache;\n\n\t\t// Update bind\n\t\t(function(cache, arg1, arg2){\n\t\t\tself.$e.on(arg2.path, function(e, v) {\n\t\t\t\tif (v === cache) return false\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tel.style[arg1] = v;\n\t\t\t\t});\n\t\t\t\tcache = v;\n\t\t\t});\n\t\t})(cache, arg1, arg2);\n\t} else if (arg2 !== undefined) {\n\t\tel.style[arg1] = arg2;\n\t} else if (isString(arg1)) {\n\t\tel.setAttribute('style', arg1);\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetStyle.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar setAttr = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (arg2 !== undefined) {\n\t\tif (arg1 === 'style') {\n\t\t\tsetStyle.call(this, el, arg2);\n\t\t} else if (arg1 === 'model' && isWatchable(arg2)) {\n\t\t\tvar cache = arg2.get();\n\t\t\tel.value = cache;\n\t\t\tel['oninput'] = function () { arg2.source[arg2.prop] = cache = el.value; self.$e.emit(arg2.path, el.value); };\n\t\t\t// Update bind\n\t\t\t(function(cache, arg1, arg2){\n\t\t\t\tself.$e.on(arg2.path, function(e, v) {\n\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tel.value = v;\n\t\t\t\t\t});\n\t\t\t\t\tcache = v;\n\t\t\t\t});\n\t\t\t})(cache, arg1, arg2);\n\t\t} else if (isFunction(arg2)) {\n\t\t\tel[arg1] = function (e) { arg2.call(self, e); };\n\t\t} else if (isWatchable(arg2)) {\n\t\t\tvar temp = arg2.get();\n\t\t\tif (isFunction(temp)) {\n\t\t\t\tel[arg1] = function (e) { arg2.get().call(self, e); };\n\t\t\t} else {\n\t\t\t\tvar cache = arg2.get();\n\t\t\t\tlet z = el.setAttribute(arg1, cache);\n\n\t\t\t\t// Update bind\n\t\t\t\t(function(cache, arg1, arg2){\n\t\t\t\t\tself.$e.on(arg2.path, function(e, v) {\n\t\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\t\tel.setAttribute(arg1, v);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcache = v;\n\t\t\t\t\t});\n\t\t\t\t})(cache, arg1, arg2);\n\t\t\t}\n\t\t} else {\n\t\t\tel.setAttribute(arg1, arg2);\n\t\t}\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetAttr.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\nvar isWatchable = function (a) { return a && a instanceof NW; };\nvar isCondition = function (a) { return a && a instanceof Condition; };\nvar isComponent = function (a) { return a && a.__radi; };\n\nconst text = function (str) { return document.createTextNode(str); };\n\nvar radiArgs = function (element, args) {\n\tvar self = this;\n\tfor (var i = 0; i < args.length; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (arg !== 0 && !arg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// support middleware\n\t\tif (isComponent(arg)) {\n\t\t\telement.appendChild(arg.__radi().$render());\n\t\t} else if (isCondition(arg)) {\n\t\t\tvar arg2 = arg.__do(), a, id = arg2.id;\n\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\ta = arg2.r.__radi().$render();\n\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\ta = arg2.r();\n\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\ta = text(arg2.r);\n\t\t\t} else {\n\t\t\t\ta = arg2.r;\n\t\t\t}\n\t\t\telement.appendChild(a);\n\t\t\t(function(arg){\n\t\t\t\targ.watch(function(v) {\n\t\t\t\t\tvar arg2 = arg.__do(), b;\n\t\t\t\t\tif (id === arg2.id) return false\n\t\t\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\t\t\tb = arg2.r.__radi().$render();\n\t\t\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\t\t\tb = arg2.r();\n\t\t\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\t\t\tb = text(arg2.r);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tb = arg2.r;\n\t\t\t\t\t}\n\t\t\t\t\tunmountAll(a);\n\t\t\t\t\ta.parentNode.replaceChild(b, a);\n\t\t\t\t\ta = b;\n\t\t\t\t\tmountAll(a);\n\t\t\t\t\tid = arg2.id;\n\t\t\t\t});\n\t\t\t})(arg);\n\t\t} else if (typeof arg === 'function') {\n\t\t\targ.call(this, element);\n\t\t} else if (isString(arg) || isNumber(arg)) {\n\t\t\telement.appendChild(text(arg));\n\t\t} else if (isNode(getEl(arg))) {\n\t\t\telement.appendChild(arg);\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tradiArgs.call(this, element, arg);\n\t\t} else if (isWatchable(arg)) {\n\t\t\tvar cache = arg.get();\n\t\t\tlet z = text(cache);\n\t\t\telement.appendChild(z);\n\n\t\t\t// Update bind\n\t\t\t(function(cache, arg){\n\t\t\t\tself.$e.on(arg.path, function(e, v) {\n\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tz.textContent = v;\n\t\t\t\t\t});\n\t\t\t\t\tcache = v;\n\t\t\t\t});\n\t\t\t})(cache, arg);\n\t\t} else if (typeof arg === 'object') {\n\t\t\tsetAttr.call(this, element, arg);\n\t\t}\n\n\t}\n};\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nconst r = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar element;\n\n\tif (isString(query)) {\n\t\telement = memoizeHTML(query).cloneNode(false);\n\t} else if (isNode(query)) {\n\t\telement = query.cloneNode(false);\n\t} else {\n\t\telement = document.createDocumentFragment();\n\t}\n\n\tradiArgs.call(this, element, args);\n\n\treturn element;\n};\nr.extend = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar clone = memoizeHTML(query);\n\n\treturn r.bind.apply(r, [ this, clone ].concat( args ));\n};\n\nconst component = function (o) {\n\tvar fn = o.view.toString().replace(STRIP_COMMENTS, '');\n\tvar match = FIND_L.exec(fn);\n\tvar output = [];\n\tvar cursor = 0;\n\n\twhile (match !== null) {\n\t\tvar n = match.index,\n\t\t\tall = match.input,\n\t\t\t_l = 1,\n\t\t\t_r = 0;\n\n\t\tconst len = all.length;\n\n\t\tfor (var i = n + 2; i < len; i++) {\n\t\t\tvar char = all.charCodeAt(i);\n\t\t\tif (char === RL) {\n\t\t\t\t_l += 1;\n\t\t\t} else\n\t\t\tif (char === RR) {\n\t\t\t\t_r += 1;\n\t\t\t}\n\t\t\tif (_l === _r) break;\n\t\t}\n\n\t\tvar found = all.substr(n, i + 1 - n);\n\n\t\tvar m = found.match(/[a-zA-Z_$]+(?:\\.\\w+(?:\\[.*\\])?)+/g) || [];\n\t\t// var obs = (m.length > 0) ? m.join('__ob__,') + '__ob__' : '';\n\t\tvar obs = [];\n\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\tvar temp = m[i].split('.');\n\t\t\tif (temp.length > 1) {\n\t\t\t\tvar last = temp.splice(-1)[0];\n\t\t\t\tobs.push('[' + temp + ', \"' + last + '\"]');\n\t\t\t}\n\t\t}\n\t\tvar obs = obs.join(',');\n\t\tvar newString = 'll(function(){ return ' + found.substr(1) + '; },[' + obs + '], \"' + m.join(',') + '\")';\n\n\t\toutput.push(fn.substr(cursor, n - cursor));\n\t\toutput.push(newString);\n\t\tcursor = n + found.length;\n\n\t\tmatch = FIND_L.exec(fn);\n\t}\n\toutput.push(fn.substr(cursor, fn.length - cursor));\n\to.$view = output.join('');\n\n\treturn Component.bind(this, o);\n};\nvar Component = function Component (o) {\n\tthis.o = {\n\t\tname: o.name,\n\t\tstate: clone(o.state),\n\t\tprops: clone(o.props),\n\t\tactions: o.actions,\n\t\tview: o.view,\n\t\t$view: o.$view,\n\t};\n\n\tthis.__radi = function() { return new Radi(this.o); };\n};\nComponent.prototype.props = function props (p) {\n\tfor (var k in p) {\n\t\tif (typeof this.o.props[k] === 'undefined') {\n\t\t\tconsole.warn('[Radi.js] Warn: Creating a prop `', k, '` that is not defined in component');\n\t\t}\n\t\tthis.o.props[k] = p[k];\n\t}\n\treturn this;\n};\n\nconst mount = function (comp, id) {\n\tconst where = (id.constructor === String) ? document.getElementById(id) : id;\n\tvar out = (comp instanceof Component) ? comp.__radi().$render() : comp;\n\twhere.appendChild(out);\n\treturn out;\n};\n\nvar emptyNode = text('');\n\nconst list = function (data, act) {\n\tif (!data) return '';\n\tvar SELF = this;\n\n\tvar link, fragment = document.createDocumentFragment(), toplink = emptyNode.cloneNode();\n\n\tfragment.appendChild(toplink);\n\n\tvar cache = data.source[data.prop];\n\n\tif (isArray(cache)) {\n\t\tfor (var i = 0; i < cache.length; i++) {\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, cache[i], i)\n\t\t\t);\n\t\t}\n\t} else {\n\t\tvar i = 0;\n\t\tfor (var key in cache) {\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, cache[key], key, i)\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t}\n\n\tlink = fragment.lastChild;\n\n\tvar w = function(a, b) {\n\t\tif (a > 0) {\n\t\t\tvar len = b.length;\n\t\t\tvar start = len - a;\n\t\t\tfor (var i = start; i < len; i++) {\n\t\t\t\tfragment.appendChild(\n\t\t\t\t\tact.call(SELF, data.source[data.prop][i], i)\n\t\t\t\t);\n\t\t\t}\n\t\t\tvar temp = fragment.lastChild;\n\t\t\tlink.parentElement.insertBefore(fragment, link.nextSibling);\n\t\t\tlink = temp;\n\t\t} else\n\t\tif (a < 0) {\n\t\t\tfor (var i = 0; i < Math.abs(a); i++) {\n\t\t\t\tvar templink = link.previousSibling;\n\t\t\t\tlink.parentElement.removeChild(link);\n\t\t\t\tlink = templink;\n\t\t\t}\n\t\t}\n\t};\n\n\t// var cache = data.get()\n\tif (data.path) {\n\t\tvar len = cache.length;\n\t\tSELF.$e.on(data.path, function(e, v) {\n\t\t\tw(v.length - len, v);\n\t\t\tlen = v.length;\n\t\t});\n\t}\n\n\treturn fragment;\n};\n\n\nfunction NW(source, prop, path) {\n  this.path = ((path) ? path : source.__path) + '.' + prop;\n  // var orginal = source.__path + '.' + prop;\n  this.get = () => (source[prop]);\n  // this.get = () => (get((source.__path + '.' + prop).split('.').shift(), source));\n  this.source = source;\n  this.prop = prop;\n}\n\n// var linkNum = 0\n\nconst link = function (fn, watch, txt) {\n\tvar args = { s: null }, SELF = this, f = () => (fn.call(this));\n\t// linkNum += 1;\n\n\tif (txt.length === 1 && fn.toString()\n\t\t\t\t.replace(/(function \\(\\)\\{ return |\\(|\\)|\\; \\})/g, '')\n\t\t\t\t.trim() === txt[0]) {\n\t\treturn new NW(watch[0][0], watch[0][1])\n\t}\n\n\tvar len = watch.length;\n\n\targs.s = f();\n\tvar path = [];\n\tfor (var i = 0; i < len; i++) {\n\t\tpath.push(watch[i][0].__path + '.' + watch[i][1]);\n\t}\n\targs.__path = '$+' + path.join('+');\n\tconsole.log( 'reduce', args.__path );\n\n\tfor (var i = 0; i < len; i++) {\n\t\tvar item = watch[i][0][watch[i][1]];\n\t\t(function(path, args, fn) {\n\t\t\tSELF.$e.on(path, (e) => {\n\t\t\t\tvar cache = f();\n\t\t\t\t// debugger\n\t\t\t\t// if (args.s !== cache) {\n\t\t\t\t\targs.s = cache;\n\t\t\t\t\t// if (path ==='this.bars.95.translateY')\n\t\t\t\t\t// \tconsole.warn('TRIGGERED', SELF, cache, path, args.__path + '.s', args.s);\n\t\t\t\t\tSELF.$e.emit(args.__path, f());\n\t\t\t\t// }\n\t\t\t});\n\t\t})(watch[i][0].__path + '.' + watch[i][1], args, fn);\n\t}\n\n\tif (len <= 0) return args.s;\n\treturn new NW(args, 's', args.__path);\n};\n\nconst cond = function (a, e) {\n\treturn new Condition(a, e, this)\n};\nvar Condition = function Condition (a, e, SELF) {\n\tthis.cases = [{a:a,e:e}];\n\tthis.w = [];\n\tthis.els = emptyNode.cloneNode();\n\n\tif (isWatchable(a)) { this.w.push(a); }\n\n\tthis.watch = function(cb) {\n\t\tfor (var w in this.w) {\n\t\t\tSELF.$e.on(this.w[w].path, (e, v) => {\n\t\t\t\tcb(v);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.__do = function() {\n\t\tvar ret = {id: null};\n\t\tfor (var c in this.cases) {\n\t\t\tvar a = isWatchable(this.cases[c].a) ? this.cases[c].a.get() : this.cases[c].a;\n\t\t\tif (a) {\n\t\t\t\tret.id = c;\n\t\t\t\tret.r = this.cases[c].e;\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (typeof ret.r === 'undefined') ret.r = this.els;\n\t\treturn ret\n\t};\n};\nCondition.prototype.elseif = function (a, e) {\n\tthis.cases.push({a:a,e:e});\n\tif (isWatchable(a)) { this.w.push(a); }\n\treturn this\n};\nCondition.prototype.cond = Condition.prototype.elseif;\nCondition.prototype.else = function (e) {\n\tthis.els = e;\n\treturn this\n};\n\nconst l = function (f) {\n\treturn f\n};\n\nconst ll = function (f, w, c) {\n\tif (!w) {\n\t\treturn f\n\t} else {\n\t\treturn link.call(this, f, w, c.split(','))\n\t}\n};\n\nconst freeze = () => { frozenState = true; };\nconst unfreeze = () => {\n\tfrozenState = false;\n\n\tfor (var ii = 0; ii < activeComponents.length; ii++) {\n\t\tif (typeof activeComponents[ii].onMount === 'function') {\n\t\t\tactiveComponents[ii].onMount.call(activeComponents[ii]);\n\t\t}\n\t}\n};\n\nexports.version = version;\nexports.activeComponents = activeComponents;\nexports.text = text;\nexports.r = r;\nexports.component = component;\nexports.mount = mount;\nexports.list = list;\nexports.link = link;\nexports.cond = cond;\nexports.l = l;\nexports.ll = ll;\nexports.freeze = freeze;\nexports.unfreeze = unfreeze;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=radi.js.map\n"]}
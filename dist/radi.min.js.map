{"version":3,"sources":["dist/radi.js"],"names":["global","factory","exports","module","define","amd","radi","this","es","EventSpitter","STRIP_COMMENTS","FIND_L","RL","charCodeAt","RR","HASH","DOT","frozenState","isArray","o","Array","clone","obj","i","ret","Object","prototype","toString","call","len","length","hasOwnProperty","defineProperties","relocate","configurable","enumerable","value","what","wit","key","end","change","Radi","constructor","populateOne","writable","item","path","def","__r","__path","ii","createElement","query","ns","ref","tag","id","className","mode","buffer","char","isHash","isDot","parseQuery","element","document","createElementNS","setAttribute","triggerChanges","a","b","prop","p","emit","JSON","stringify","arg","ids","activeComponents","SELF","state","Error","props","isWatchable","get","watch","populate","pr","actions","old","apply","arguments","bind","$id","$name","name","$state","$props","$actions","$html","createDocumentFragment","$view","Function","r","list","l","cond","$link","appendChild","$render","mount","console","log","onMount","push","unmount","onDestroy","splice","unmountAll","el","children","mountAll","setStyle","view","arg1","arg2","getEl","style","undefined","isString","setAttr","self","cache","source","isFunction","e","temp","parent","nodeType","isNumber","isNode","NW","isCondition","Condition","isComponent","__radi","text","str","createTextNode","radiArgs","args","__do","v","parentNode","replaceChild","z","on","htmlCache","memoizeHTML","cloneNode","extend","concat","Component","k","warn","emptyNode","data","act","link","fragment","toplink","lastChild","parentElement","insertBefore","nextSibling","Math","abs","templink","previousSibling","removeChild","w","c","fn","txt","n","s","f","replace","trim","cases","els","cb","elseif","else","split","version","component","match","exec","output","cursor","index","all","input","_l","_r","found","substr","m","obs","last","join","newString","comp","where","String","getElementById","out","freeze","unfreeze"],"mappings":"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","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.radi = {})));\n}(this, (function (exports) { 'use strict';\n\nconst version = '0.0.5';\n\nvar es = new EventSpitter;\n\n// es.on('this.list', function(e) {\n// \tconsole.log( \"1 I was triggered by event \" + e );\n// })\n//\n// es.on('this.list', function(e) {\n// \tconsole.log( \"2 I was triggered by event \" + e );\n// })\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar FIND_L = /\\bl\\(/g;\n\nvar RL = '('.charCodeAt(0);\nvar RR = ')'.charCodeAt(0);\nvar HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAGNAME = 0;\nvar ID = 1;\nvar CLASSNAME = 2;\n\nvar frozenState = false;\n\nvar isArray = function (o) { return Array.isArray(o) === true };\n\nfunction clone(obj) {\n\tvar i, ret;\n\tif (typeof obj === \"object\") {\n\t\tif (obj === null) return obj;\n\t\tif (Object.prototype.toString.call(obj) === \"[object Array]\") {\n\t\t\tvar len = obj.length;\n\t\t\tret = new Array(len);\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (typeof obj[i] === \"object\") {\n\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t} else {\n\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tret = {};\n\t\t\tfor (i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\tif (typeof(obj[i] === \"object\")) {\n\t\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tret = obj;\n\t}\n\n\treturn ret;\n}\n\nObject.defineProperties(Object, {\n\trelocate: {\n\t\tconfigurable: true,\n\t\tenumerable: false,\n\t\tvalue: function relocate(what, wit) {\n\t\t\tfor (var key in wit) {\n\t\t\t\tconst end = wit[key];\n\t\t\t\tvar change = false;\n\t\t\t\tif (end && typeof end === 'object' && !(end instanceof Radi)) {\n\t\t\t\t\tif (typeof what[key] === 'undefined') what[key] = end.constructor();\n\t\t\t\t\tObject.relocate(what[key], end);\n\t\t\t\t\tchange = true;\n\t\t\t\t} else {\n\t\t\t\t\tif (what[key] !== end) {\n\t\t\t\t\t\tchange = true;\n\t\t\t\t\t\twhat[key] = end;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (change) {\n\t\t\t\t\tpopulateOne(what, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twritable: true\n\t}\n});\n\n// var populateOne = function populateOne(item, ii) {\n// \tif (typeof item[ii + '__ob__'] !== 'undefined') return false\n//\n// \tvar def = { __r: { value: true } }\n//\n// \tif (typeof item.__path === 'undefined') def.__path = { value: item.__path + '.' + ii }\n//\n// \tvar ret = Object.defineProperties(item, def);\n//\n// \tif (typeof item[ii] === 'object') populate(item[ii], item.__path + '.' + ii)\n//\n// \treturn ret\n// }\n\nvar populateOne = function populateOne(item, path) {\n\tif (typeof item !== 'object' || !item) return false\n\tif (path === 'this.$view') return false\n\tif (path === 'this.$props') return false\n\tif (path === 'this.$state') return false\n\tif (path === 'this.$link') return false\n\tif (path === 'this.$html') return false\n\t// if (typeof item[ii + '__ob__'] !== 'undefined') return false\n\n\tvar def = { __r: { value: true } };\n\n\tif (typeof item.__path === 'undefined') def.__path = { value: path };\n\n\tvar ret = Object.defineProperties(item, def);\n\n\tif (typeof item === 'object')\n\t\tfor (var ii in item) {\n\t\t\tif (typeof item === 'object')\n\t\t\t\tpopulateOne(item[ii], path + '.' + ii);\n\t\t}\n\n\t// if (typeof item === 'object') populate(item[ii], path)\n\n\treturn ret\n};\n\n// Add watchers to every object and array\nvar populate = function populate(item, pr) {\n\tvar path = (typeof pr === 'undefined') ? 'this' : pr;\n\tif (item && typeof item === 'object') {\n\t\tvar def = { __r: { value: true } };\n\n\t\tif (typeof item.__path === 'undefined') def.__path = { value: path };\n\n\t\tvar ret = Object.defineProperties(item, def);\n\n\t\tfor (var ii in item) {\n\t\t\tpopulate(item[ii], path + '.' + ii);\n\t\t}\n\n\t\t// // If input is an Array\n\t\t// if (isArray(item)) {\n\t\t// \t// if (typeof item.__r === 'undefined' && !item.__r) {\n\t\t// \t// \tarrayRules(item, def)\n\t\t// \t// }\n\t\t//\n\t\t// \tfor (var ii in item) {\n\t\t// \t\t// Add watchable\n\t\t// \t\t// Should not be able to reconfigure this\n\t\t// \t\t// if (typeof item[ii + '__ob__'] === 'undefined') {\n\t\t// \t\t\t// def[ii + '__ob__'] = { value: watchable(item, ii), configurable: true }\n\t\t// \t\t\tpopulate(item[ii], path + '.' + ii)\n\t\t// \t\t// }\n\t\t// \t}\n\t\t//\n\t\t// } else\n\t\t// // If input is an Object\n\t\t// if (isObject(item)) {\n\t\t//\n\t\t// \tfor (var ii in item) {\n\t\t// \t\t// Add watchable\n\t\t// \t\t// Should not be able to reconfigure this\n\t\t// \t\t// if (typeof item[ii + '__ob__'] === 'undefined') {\n\t\t// \t\t\t// def[ii + '__ob__'] = { value: watchable(item, ii), configurable: true }\n\t\t// \t\t\tpopulate(item[ii], path + '.' + ii)\n\t\t// \t\t// }\n\t\t// \t}\n\t\t//\n\t\t// }\n\n\t\treturn ret\n\t} else { return false }\n};\n\nvar parseQuery = function (query) {\n\tvar tag = null;\n\tvar id = null;\n\tvar className = null;\n\tvar mode = TAGNAME;\n\tvar buffer = '';\n\n\tfor (var i = 0; i <= query.length; i++) {\n\t\tvar char = query.charCodeAt(i);\n\t\tvar isHash = char === HASH;\n\t\tvar isDot = char === DOT;\n\t\tvar isEnd = !char;\n\n\t\tif (isHash || isDot || isEnd) {\n\t\t\tif (mode === TAGNAME) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\ttag = 'div';\n\t\t\t\t} else {\n\t\t\t\t\ttag = buffer;\n\t\t\t\t}\n\t\t\t} else if (mode === ID) {\n\t\t\t\tid = buffer;\n\t\t\t} else {\n\t\t\t\tif (className) {\n\t\t\t\t\tclassName += ' ' + buffer;\n\t\t\t\t} else {\n\t\t\t\t\tclassName = buffer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isHash) {\n\t\t\t\tmode = ID;\n\t\t\t} else if (isDot) {\n\t\t\t\tmode = CLASSNAME;\n\t\t\t}\n\n\t\t\tbuffer = '';\n\t\t} else {\n\t\t\tbuffer += query[i];\n\t\t}\n\t}\n\n\treturn { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n\tvar ref = parseQuery(query);\n\tvar tag = ref.tag;\n\tvar id = ref.id;\n\tvar className = ref.className;\n\tvar element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n\tif (id) {\n\t\telement.id = id;\n\t}\n\n\tif (className) {\n\t\tif (ns) {\n\t\t\telement.setAttribute('class', className);\n\t\t} else {\n\t\t\telement.className = className;\n\t\t}\n\t}\n\n\treturn element;\n};\n\nif (!Array.isArray) {\n\tArray.isArray = function(arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\n\n// function triggerChanges(a, b, path) {\n// \tif (!(a === null && b === null))\n// \t\tif (JSON.stringify(a) !== JSON.stringify(b)) {\n// \t\t\t// Found difference in data\n// \t\t\tif (Array.isArray(b) && b.length < a.length && !b.length) {\n// \t\t\t\t//\n// \t\t\t} else\n// \t\t\tif (typeof a === 'object' && typeof a === typeof b) {\n// \t\t\t\tfor (var prop in a) {\n// \t\t\t\t\ttriggerChanges(a[prop], b[prop], path + '.' + prop)\n// \t\t\t\t}\n// \t\t\t} else {\n// \t\t\t\t// Simple value\n// \t\t\t\tconsole.warn('Change in value detected', path)\n// \t\t\t\tes.emit(path, b)\n// \t\t\t}\n// \t\t}\n// \t\tif (typeof a === 'object' && typeof a === typeof b) {\n// \t\t\tvar len = {\n// \t\t\t\ta: (isObject(a)) ? Object.keys(a).length : a.length,\n// \t\t\t\tb: (isObject(b)) ? Object.keys(b).length : b.length\n// \t\t\t}\n// \t\t\tif (len.a !== len.b) {\n// \t\t\t\tconsole.warn('Change in length detected', path)\n// \t\t\t\tes.emit(path, b)\n// \t\t\t} else if (JSON.stringify(a) !== JSON.stringify(b)) {\n// \t\t\t\tconsole.warn('Change in object detected', path)\n// \t\t\t\tes.emit(path, b)\n// \t\t\t}\n// \t\t\tfor (var prop in a) {\n// \t\t\t\ttriggerChanges(a[prop], b[prop], path + '.' + prop)\n// \t\t\t}\n// \t\t} else if (JSON.stringify(a) !== JSON.stringify(b)) {\n// \t\t\tconsole.warn('Change in value detected', path)\n// \t\t\tes.emit(path, b)\n// \t\t}\n// }\n\n\nfunction triggerChanges(a, b, path) {\n\tif (path === 'this.$view'\n\t\t|| path === 'this.$props'\n\t\t|| path === 'this.$state'\n\t\t|| path === 'this.$link'\n\t\t|| path === 'this.$html') return false\n  for (var prop in a) {\n\t\tvar p = path + '.' + prop;\n    if (typeof b[prop] === 'undefined') {\n\t\t\t// console.warn('Change in value detected', p)\n\t\t\tes.emit(p, b[prop]);\n    } else if (JSON.stringify(a[prop]) !== JSON.stringify(b[prop])) {\n      // console.log(typeof b[prop], 2);\n      // if value\n      if (typeof b[prop] !== 'object' || b[prop] === null) {\n\t\t\t\t// console.warn('Change in value detected', p)\n\t\t\t\tes.emit(p, b[prop]);\n    \t} else {\n        // if array\n        if (isArray(b[prop])) {\n\t\t\t\t\t// console.warn('Change in value detected', p)\n\t\t\t\t\tes.emit(p, b[prop]);\n\t\t\t\t\ttriggerChanges(a[prop], b[prop], p);\n        }\n        // if object\n        else {\n\t\t\t\t\t// console.warn('Change in value detected', p)\n\t\t\t\t\tes.emit(p, b[prop]);\n          triggerChanges(a[prop], b[prop], p);\n        }\n      }\n    }\n  }\n}\n\n\nvar ids = 0;\nconst activeComponents = [];\n\nvar Radi = function(o) {\n\tvar SELF = {};\n\n\tfor (var i in o.state) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tSELF[i] = o.state[i];\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write state for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tfor (var i in o.props) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tif (isWatchable(o.props[i])) {\n\t\t\t\tSELF[i] = o.props[i].get();\n\t\t\t\to.props[i].watch(function (a) {\n\t\t\t\t\tSELF[i] = a;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tSELF[i] = o.props[i];\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write prop for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tpopulate(SELF);\n\t// SELF = clone(SELF)\n\n\tfor (var i in o.actions) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tSELF[i] = (function() {\n\t\t\t\tif (frozenState) return null\n\t\t\t\tvar old = clone(SELF);\n\t\t\t\tvar b = this.apply(SELF, arguments);\n\t\t\t\tpopulateOne(SELF, 'this');\n\t\t\t\ttriggerChanges(old, SELF, 'this');\n\t\t\t\treturn b\n\t\t\t}).bind(o.actions[i]);\n\n\t\t\t// (function(i) {\n\t\t\t// \tObject.defineProperty(SELF[i], 'props', {\n\t\t\t// \t\tvalue() {\n\t\t\t// \t\t\tvar args = arguments;\n\t\t\t// \t\t\treturn function () { return (frozenState) ? function () {} : SELF[i].apply(SELF, args, arguments) }\n\t\t\t// \t\t}\n\t\t\t// \t});\n\t\t\t// })(i)\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Error: Trying to write action for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\t// for (var i in o.actions) {\n\t// \tif (typeof SELF[i] === 'undefined') {\n\t// \t\tconst act = o.actions[i];\n\t// \t\tSELF[i] = function () { return (frozenState) ? function () {} : act.apply(SELF, arguments) };\n\t//\n\t// \t\t(function(i) {\n\t// \t\t\tObject.defineProperty(SELF[i], 'props', {\n\t// \t\t\t\tvalue() {\n\t// \t\t\t\t\tvar args = arguments;\n\t// \t\t\t\t\treturn function () { return (frozenState) ? function () {} : SELF[i].apply(SELF, args, arguments) }\n\t// \t\t\t\t}\n\t// \t\t\t});\n\t// \t\t})(i)\n\t// \t} else {\n\t// \t\tthrow new Error('[Radi.js] Error: Trying to write action for reserved variable `' + i + '`');\n\t// \t}\n\t// }\n\n\tSELF.$id = ids++;\n\tSELF.$name = o.name;\n\tSELF.$state = o.state || {};\n\tSELF.$props = o.props || {};\n\tSELF.$actions = o.actions || {};\n\tSELF.$html = document.createDocumentFragment();\n\n\t// Object.assign(SELF, SELF.$state)\n\t// Object.assign(SELF, linkedActions(SELF.$actions))\n\n\tSELF.$view = new Function('r','list','l','cond','return ' + o.$view)(\n\t\tr.bind(SELF), list.bind(SELF), l.bind(SELF), cond.bind(SELF)\n\t);\n\n\tSELF.$link = SELF.$view();\n\t// SELF.$link.unmount = SELF.unmount.bind(SELF)\n\tSELF.$html.appendChild(SELF.$link);\n\n\tSELF.$render = function() {\n\t\tSELF.mount();\n\t\treturn SELF.$html\n\t};\n\n\t// SELF.$html.destroy = function () {\n\t// \tconst oldRootElem = SELF.$link.parentElement;\n\t// \tconst newRootElem = oldRootElem.cloneNode(false);\n\t// \toldRootElem.parentNode.insertBefore(newRootElem, oldRootElem);\n\t// \tSELF.unmount();\n\t// \toldRootElem.parentNode.removeChild(oldRootElem);\n\t// }\n\n\tSELF.mount = function () {\n\t\tconsole.log('MOUNT', SELF.$name);\n\t\tif (typeof SELF.$actions.onMount === 'function') {\n\t\t\tSELF.$actions.onMount.call(SELF);\n\t\t}\n\t\tactiveComponents.push(SELF);\n\t};\n\n\tSELF.unmount = function () {\n\t\tconsole.log('UNMOUNT', SELF.$name);\n\t\tif (typeof SELF.$actions.onDestroy === 'function') {\n\t\t\tSELF.$actions.onDestroy.call(SELF);\n\t\t}\n\t\tfor (var i = 0; i < activeComponents.length; i++) {\n\t\t\tif (activeComponents[i].$id === SELF.$id) {\n\t\t\t\tactiveComponents.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn SELF.$link;\n\t};\n\n\tSELF.$link.unmount = SELF.unmount.bind(SELF);\n\tSELF.$link.mount = SELF.mount.bind(SELF);\n\t// SELF.$remount = function () {\n\t// \tthis.mount();\n\t// \treturn this.link\n\t// }\n\t// SELF.$out = function () {\n\t// \tthis.mount();\n\t// \treturn this.$html;\n\t// }\n\n\treturn SELF\n};\n\nvar unmountAll = function unmountAll(el) {\n\tif (typeof el.unmount === 'function') el.unmount();\n\tif (el.children && el.children.length > 0) {\n\t\tfor (var i = 0; i < el.children.length; i++) {\n\t\t\tunmountAll(el.children[i]);\n\t\t}\n\t}\n};\n\nvar mountAll = function mountAll(el) {\n\tif (typeof el.mount === 'function') el.mount();\n\tif (el.children && el.children.length > 0) {\n\t\tfor (var i = 0; i < el.children.length; i++) {\n\t\t\tmountAll(el.children[i]);\n\t\t}\n\t}\n};\n\nvar radiMutate = function (c) {\n\t// window.requestAnimationFrame(() => {\n\t\t// window.requestAnimationFrame(() => {\n\t\t\tc();\n\t\t// });\n\t// });\n};\n\nvar setStyle = function (view, arg1, arg2) {\n\tvar el = getEl(view);\n\n\tif (isWatchable(arg2)) {\n\t\tel.style[arg1] = arg2.get();\n\t\t// Update bind\n\t\targ2.watch((a) => {\n\t\t\tradiMutate(() => {\n\t\t\t\tel.style[arg1] = a;\n\t\t\t});\n\t\t});\n\t} else if (arg2 !== undefined) {\n\t\tel.style[arg1] = arg2;\n\t} else if (isString(arg1)) {\n\t\tel.setAttribute('style', arg1);\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetStyle(el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar setAttr = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (arg2 !== undefined) {\n\t\tif (arg1 === 'style') {\n\t\t\tsetStyle(el, arg2);\n\t\t} else if (arg1 === 'model' && isWatchable(arg2)) {\n\t\t\tvar cache = arg2.get();\n\t\t\tel.value = cache;\n\t\t\tel['oninput'] = function () { arg2.source[arg2.prop] = cache = el.value; es.emit(arg2.path, el.value); };\n\t\t\targ2.watch(function (a) {\n\t\t\t\tif (cache !== a)\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tel.value = a;\n\t\t\t\t\t});\n\t\t\t});\n\t\t} else if (isFunction(arg2)) {\n\t\t\tel[arg1] = function (e) { arg2.call(self, e); };\n\t\t} else if (isWatchable(arg2)) {\n\t\t\tvar temp = arg2.get();\n\t\t\tif (isFunction(temp)) {\n\t\t\t\tel[arg1] = function (e) { arg2.get().call(self, e); };\n\t\t\t} else {\n\t\t\t\tel.setAttribute(arg1, arg2.get());\n\t\t\t\t// Update bind\n\t\t\t\targ2.watch(function (a) {\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tel.setAttribute(arg1, a);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tel.setAttribute(arg1, arg2);\n\t\t}\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetAttr.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\nvar isWatchable = function (a) { return a && a instanceof NW; };\nvar isCondition = function (a) { return a && a instanceof Condition; };\nvar isComponent = function (a) { return a && a.__radi; };\n\nconst text = function (str) { return document.createTextNode(str); };\n\nvar radiArgs = function (element, args) {\n\tfor (var i = 0; i < args.length; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (arg !== 0 && !arg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// support middleware\n\t\tif (isComponent(arg)) {\n\t\t\telement.appendChild(arg.__radi().$render());\n\t\t} else if (isCondition(arg)) {\n\t\t\tvar arg2 = arg.__do(), a, id = arg2.id;\n\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\ta = arg2.r.__radi().$render();\n\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\ta = arg2.r();\n\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\ta = text(arg2.r);\n\t\t\t} else {\n\t\t\t\ta = arg2.r;\n\t\t\t}\n\t\t\telement.appendChild(a);\n\t\t\t(function(arg){arg.watch(function(v) {\n\t\t\t\tvar arg2 = arg.__do(), b;\n\t\t\t\tif (id === arg2.id) return false\n\t\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\t\tb = arg2.r.__radi().$render();\n\t\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\t\tb = arg2.r();\n\t\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\t\tb = text(arg2.r);\n\t\t\t\t} else {\n\t\t\t\t\tb = arg2.r;\n\t\t\t\t}\n\t\t\t\tunmountAll(a);\n\t\t\t\ta.parentNode.replaceChild(b, a);\n\t\t\t\ta = b;\n\t\t\t\tmountAll(a);\n\t\t\t\tid = arg2.id;\n\t\t\t});})(arg);\n\t\t} else if (typeof arg === 'function') {\n\t\t\targ.call(this, element);\n\t\t} else if (isString(arg) || isNumber(arg)) {\n\t\t\telement.appendChild(text(arg));\n\t\t} else if (isNode(getEl(arg))) {\n\t\t\telement.appendChild(arg);\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tradiArgs.call(this, element, arg);\n\t\t} else if (isWatchable(arg)) {\n\t\t\tvar cache = arg.get();\n\t\t\tlet z = text(cache);\n\t\t\telement.appendChild(z);\n\n\t\t\t// Update bind\n\t\t\tif (arg.path) {\n\t\t\t\t(function(cache){es.on(arg.path, function(e, v) {\n\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tz.textContent = v;\n\t\t\t\t\t});\n\t\t\t\t\tcache = v;\n\t\t\t\t});})(cache);\n\t\t\t}\n\t\t\t// arg.watch((a) => {\n\t\t\t// \tconsole.warn('Change received', arg.path, arg, arg.prop)\n\t\t\t// \tradiMutate(() => {\n\t\t\t// \t\tz.textContent = a;\n\t\t\t// \t});\n\t\t\t// });\n\t\t} else if (typeof arg === 'object') {\n\t\t\tsetAttr.call(this, element, arg);\n\t\t}\n\n\t}\n};\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nconst r = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar element;\n\n\tif (isString(query)) {\n\t\telement = memoizeHTML(query).cloneNode(false);\n\t} else if (isNode(query)) {\n\t\telement = query.cloneNode(false);\n\t} else {\n\t\telement = document.createDocumentFragment();\n\t}\n\n\tradiArgs.call(this, element, args);\n\n\treturn element;\n};\nr.extend = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar clone = memoizeHTML(query);\n\n\treturn r.bind.apply(r, [ this, clone ].concat( args ));\n};\n\nconst component = function (o) {\n\tvar fn = o.view.toString().replace(STRIP_COMMENTS, '');\n\tvar match = FIND_L.exec(fn);\n\tvar output = [];\n\tvar cursor = 0;\n\n\twhile (match !== null) {\n\t\tvar n = match.index,\n\t\t\tall = match.input,\n\t\t\t_l = 1,\n\t\t\t_r = 0;\n\n\t\tconst len = all.length;\n\n\t\tfor (var i = n + 2; i < len; i++) {\n\t\t\tvar char = all.charCodeAt(i);\n\t\t\tif (char === RL) {\n\t\t\t\t_l += 1;\n\t\t\t} else\n\t\t\tif (char === RR) {\n\t\t\t\t_r += 1;\n\t\t\t}\n\t\t\tif (_l === _r) break;\n\t\t}\n\n\t\tvar found = all.substr(n, i + 1 - n);\n\n\t\tvar m = found.match(/[a-zA-Z_$]+(?:\\.\\w+(?:\\[.*\\])?)+/g) || [];\n\t\t// var obs = (m.length > 0) ? m.join('__ob__,') + '__ob__' : '';\n\t\tvar obs = [];\n\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\tvar temp = m[i].split('.');\n\t\t\tif (temp.length > 1) {\n\t\t\t\tvar last = temp.splice(-1)[0];\n\t\t\t\tobs.push('[' + temp + ', \"' + last + '\"]');\n\t\t\t}\n\t\t}\n\t\tvar obs = obs.join(',');\n\t\tvar newString = 'l(function(){ return ' + found.substr(1) + '; },[' + obs + '], \"' + m.join(',') + '\")';\n\n\t\toutput.push(fn.substr(cursor, n - cursor));\n\t\toutput.push(newString);\n\t\tcursor = n + found.length;\n\n\t\tmatch = FIND_L.exec(fn);\n\t}\n\toutput.push(fn.substr(cursor, fn.length - cursor));\n\to.$view = output.join('');\n\n\treturn Component.bind(this, o);\n};\nvar Component = function Component (o) {\n\tthis.o = {\n\t\tname: o.name,\n\t\tstate: clone(o.state),\n\t\tprops: clone(o.props),\n\t\tactions: o.actions,\n\t\tview: o.view,\n\t\t$view: o.$view,\n\t};\n\n\tthis.__radi = function() { return new Radi(this.o); };\n};\nComponent.prototype.props = function props (p) {\n\tfor (var k in p) {\n\t\tif (typeof this.o.props[k] === 'undefined') {\n\t\t\tconsole.warn('[Radi.js] Warn: Creating a prop `', k, '` that is not defined in component');\n\t\t}\n\t\tthis.o.props[k] = p[k];\n\t}\n\treturn this;\n};\n\nconst mount = function (comp, id) {\n\tconst where = (id.constructor === String) ? document.getElementById(id) : id;\n\tvar out = (comp instanceof Component) ? comp.__radi().$render() : comp;\n\twhere.appendChild(out);\n\treturn out;\n};\n\nvar emptyNode = text('');\n\nconst list = function (data, act) {\n\tif (!data) return '';\n\tvar SELF = this;\n\n\tvar link, fragment = document.createDocumentFragment(), toplink = emptyNode.cloneNode();\n\n\tfragment.appendChild(toplink);\n\n\tvar cache = data.source[data.prop];\n\n\tif (isArray(cache)) {\n\t\tfor (var i = 0; i < cache.length; i++) {\n\t\t\t// cache[i+'__ob__'].watch((v) => {})\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, cache[i], i)\n\t\t\t);\n\t\t}\n\t} else {\n\t\tvar i = 0;\n\t\tfor (var key in cache) {\n\t\t\t// cache[i+'__ob__'].watch((v) => {})\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, cache[key], key, i)\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t}\n\n\tlink = fragment.lastChild;\n\n\tvar w = function(a, b) {\n\t\tif (a > 0) {\n\t\t\tvar start = b.length - a;\n\t\t\tfor (var i = start; i < b.length; i++) {\n\t\t\t\tfragment.appendChild(\n\t\t\t\t\tact.call(SELF, b[i], i)\n\t\t\t\t);\n\t\t\t}\n\t\t\tvar temp = fragment.lastChild;\n\t\t\tlink.parentElement.insertBefore(fragment, link.nextSibling);\n\t\t\tlink = temp;\n\t\t} else\n\t\tif (a < 0) {\n\t\t\tfor (var i = 0; i < Math.abs(a); i++) {\n\t\t\t\tvar templink = link.previousSibling;\n\t\t\t\tlink.parentElement.removeChild(link);\n\t\t\t\tlink = templink;\n\t\t\t}\n\t\t}\n\t};\n\n\t// var cache = data.get()\n\tif (data.path) {\n\t\tvar len = cache.length;\n\t\tes.on(data.path, function(e, v) {\n\t\t\tw(v.length - len, v);\n\t\t\tlen = v.length;\n\t\t});\n\t}\n\n\t// if (data.watch) data.watch(w)\n\t// if (data.get && data.get()._r_get) data.get()._r_get(w)\n\n\treturn fragment;\n};\n\n\nfunction NW(source, prop) {\n  this.path = source.__path + '.' + prop;\n  this.get = () => (source[prop]);\n  this.source = source;\n  this.prop = prop;\n\tvar path = this.path;\n\tthis.watch = function watch (c) {\n\t\tvar cache = source[prop];\n\t\tif (path) {\n\t\t\tes.on(path, function(e) {\n\t\t\t\tif (source[prop] === cache) return false\n\t\t\t\tc(source[prop], cache);\n\t\t\t\tcache = source[prop];\n\t\t\t});\n\t\t}\n\t};\n}\n\nconst link = function (fn, watch, txt) {\n\tvar args = { s: null }, SELF = this, n, f = fn.bind(this);\n\n\tif (txt.length === 1 && fn.toString()\n\t\t\t\t.replace(/(function \\(\\)\\{ return |\\(|\\)|\\; \\})/g, '')\n\t\t\t\t.trim() === txt[0]) {\n\t\treturn new NW(watch[0][0], watch[0][1])\n\t}\n\n\tfor (var i = 0; i < watch.length; i++) {\n\t\tvar item = watch[i][0][watch[i][1]];\n\t\tif (isWatchable(item)) {\n\t\t\tn = true;\n\t\t\twatch[i].watch(function () {\n\t\t\t\targs.s = f(SELF);\n\t\t\t});\n\t\t}\n\t}\n\n\targs.s = f(SELF);\n\n\tif (!n) return args.s;\n\treturn new NW(args, 's');\n};\n\nconst cond = function (a, e) {\n\treturn new Condition(a, e)\n};\nvar Condition = function Condition (a, e) {\n\tthis.cases = [{a:a,e:e}];\n\tthis.w = [];\n\tthis.els = emptyNode.cloneNode();\n\n\tif (isWatchable(a)) { this.w.push(a); }\n\n\tthis.watch = function(cb) {\n\t\tfor (var w in this.w) {\n\t\t\tthis.w[w].watch(cb);\n\t\t}\n\t};\n\n\tthis.__do = function() {\n\t\tvar ret = {id: null};\n\t\tfor (var c in this.cases) {\n\t\t\tvar a = isWatchable(this.cases[c].a) ? this.cases[c].a.get() : this.cases[c].a;\n\t\t\tif (a) {\n\t\t\t\tret.id = c;\n\t\t\t\tret.r = this.cases[c].e;\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (typeof ret.r === 'undefined') ret.r = this.els;\n\t\treturn ret\n\t};\n};\nCondition.prototype.elseif = function (a, e) {\n\tthis.cases.push({a:a,e:e});\n\tif (isWatchable(a)) { this.w.push(a); }\n\treturn this\n};\nCondition.prototype.cond = Condition.prototype.elseif;\nCondition.prototype.else = function (e) {\n\tthis.els = e;\n\treturn this\n};\n\nconst l = function (f, w, c) {\n\tif (!w) {\n\t\treturn f\n\t} else {\n\t\treturn link.call(this, f, w, c.split(','))\n\t}\n};\n\nconst freeze = () => { frozenState = true; };\nconst unfreeze = () => {\n\tfrozenState = false;\n\n\tfor (var ii = 0; ii < activeComponents.length; ii++) {\n\t\tif (typeof activeComponents[ii].onMount === 'function') {\n\t\t\tactiveComponents[ii].onMount.call(activeComponents[ii]);\n\t\t}\n\t}\n};\n\nexports.version = version;\nexports.activeComponents = activeComponents;\nexports.text = text;\nexports.r = r;\nexports.component = component;\nexports.mount = mount;\nexports.list = list;\nexports.link = link;\nexports.cond = cond;\nexports.l = l;\nexports.freeze = freeze;\nexports.unfreeze = unfreeze;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=radi.js.map\n"]}
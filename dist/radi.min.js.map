{"version":3,"sources":["dist/radi.js"],"names":["global","factory","exports","module","define","amd","radi","this","STRIP_COMMENTS","FIND_L","RL","charCodeAt","RR","HASH","DOT","TAGNAME","ID","CLASSNAME","frozenState","isArray","o","Array","clone","obj","i","ret","Object","prototype","toString","call","len","length","hasOwnProperty","createElement","query","ns","ref","tag","id","className","mode","buffer","char","isHash","isDot","parseQuery","element","document","createElementNS","setAttribute","arg","arrayMods","v","s","__radi","defineProperties","value","reverse","bind","push","splice","pop","shift","ids","activeComponents","Radi","SELF","$state","__path","addpath","target","path","addwatch","prop","getOwnPropertyDescriptor","set","targ","handler","oldval","setter","newval","constructor","String","apply","arguments","l1","l2","diff","$e","emit","watcher","object","concat","WATCH","get","on","fn","[object Object]","r","list","state","Error","props","isWatchable","parent","e","a","actions","$id","$name","name","$props","$actions","$html","createDocumentFragment","$parent","$view","Function","ll","cond","$link","appendChild","$render","mount","onMount","unmount","onDestroy","setStyle","view","arg1","arg2","self","el","getEl","cache","style","undefined","isString","key","setAttr","source","isFunction","temp","nodeType","isNumber","isNode","NW","isCondition","Condition","isComponent","text","str","createTextNode","radiArgs","args","__do","watch","b","parentNode","replaceChild","z","htmlCache","memoizeHTML","cloneNode","extend","Component","p","k","console","warn","emptyNode","data","act","link","fragment","toplink","lastChild","parentElement","insertBefore","nextSibling","Math","abs","templink","previousSibling","removeChild","w","linkNum","txt","replace","trim","cases","els","cb","c","elseif","else","f","split","version","component","match","exec","output","cursor","n","index","all","input","_l","_r","found","substr","m","obs","last","join","newString","comp","where","getElementById","out","l","freeze","unfreeze","ii"],"mappings":"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","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.radi = {})));\n}(this, (function (exports) { 'use strict';\n\nconst version = '0.1.0';\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar FIND_L = /\\bl\\(/g;\n\nvar RL = '('.charCodeAt(0);\nvar RR = ')'.charCodeAt(0);\nvar HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAGNAME = 0;\nvar ID = 1;\nvar CLASSNAME = 2;\n\nvar frozenState = false;\n\nvar isArray = function (o) { return Array.isArray(o) === true };\n\nfunction clone(obj) {\n\tvar i, ret;\n\tif (typeof obj === \"object\") {\n\t\tif (obj === null) return obj;\n\t\tif (Object.prototype.toString.call(obj) === \"[object Array]\") {\n\t\t\tvar len = obj.length;\n\t\t\tret = new Array(len);\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (typeof obj[i] === \"object\") {\n\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t} else {\n\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tret = {};\n\t\t\tfor (i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\tif (typeof(obj[i] === \"object\")) {\n\t\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tret = obj;\n\t}\n\n\treturn ret;\n}\n\nfunction parseQuery(query) {\n\tvar tag = null;\n\tvar id = null;\n\tvar className = null;\n\tvar mode = TAGNAME;\n\tvar buffer = '';\n\n\tfor (var i = 0; i <= query.length; i++) {\n\t\tvar char = query.charCodeAt(i);\n\t\tvar isHash = char === HASH;\n\t\tvar isDot = char === DOT;\n\t\tvar isEnd = !char;\n\n\t\tif (isHash || isDot || isEnd) {\n\t\t\tif (mode === TAGNAME) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\ttag = 'div';\n\t\t\t\t} else {\n\t\t\t\t\ttag = buffer;\n\t\t\t\t}\n\t\t\t} else if (mode === ID) {\n\t\t\t\tid = buffer;\n\t\t\t} else {\n\t\t\t\tif (className) {\n\t\t\t\t\tclassName += ' ' + buffer;\n\t\t\t\t} else {\n\t\t\t\t\tclassName = buffer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isHash) {\n\t\t\t\tmode = ID;\n\t\t\t} else if (isDot) {\n\t\t\t\tmode = CLASSNAME;\n\t\t\t}\n\n\t\t\tbuffer = '';\n\t\t} else {\n\t\t\tbuffer += query[i];\n\t\t}\n\t}\n\n\treturn { tag: tag, id: id, className: className };\n}\n\nfunction createElement(query, ns) {\n\tvar ref = parseQuery(query);\n\tvar tag = ref.tag;\n\tvar id = ref.id;\n\tvar className = ref.className;\n\tvar element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n\tif (id) {\n\t\telement.id = id;\n\t}\n\n\tif (className) {\n\t\tif (ns) {\n\t\t\telement.setAttribute('class', className);\n\t\t} else {\n\t\t\telement.className = className;\n\t\t}\n\t}\n\n\treturn element;\n}\n\nif (!Array.isArray) {\n\tArray.isArray = function(arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\nvar arrayMods = function (v, s) {\n\tif (v.__radi) return false\n\treturn Object.defineProperties(v, {\n\t\t__radi: { value: true },\n\t\treverse: { value: s.bind('reverse') },\n\t\tpush: { value: s.bind('push') },\n\t\tsplice: { value: s.bind('splice') },\n\t\tpop: { value: s.bind('pop') },\n\t\tshift: { value: s.bind('shift') }\n\t})\n};\n\nvar ids = 0;\nconst activeComponents = [];\n\nvar Radi = function(o) {\n\tvar SELF = {\n\t\t$state: {},\n\t\t__path: 'this'\n\t};\n\n\tfunction addpath(target, path) {\n\t\tif (typeof target.__path === 'undefined') Object.defineProperty(target, '__path', { value: path });\n\t}\n\n\tfunction addwatch(target, prop) {\n\t\tif (!Object.getOwnPropertyDescriptor(target, prop).set) watcher(target, prop);\n\t}\n\n\tfunction apply(target, object) {\n\t\tif (typeof target !== 'object' || !target) return object;\n\t\tvar path = target.__path;\n\n\t\tfor (var i in object) {\n\t\t\tif (typeof object[i] === 'object') {\n\t\t\t\tif (typeof target[i] === 'undefined') {\n\t\t\t\t\ttarget[i] = (isArray(object[i])) ? [] : {};\n\t\t\t\t\taddpath(target[i], path.concat('.').concat(i));\n\t\t\t\t}\n\t\t\t\tapply(target[i], object[i]);\n\t\t\t\t// console.log('APPLY 1', path.concat('.').concat(i), target[i])\n\t\t\t\t// SELF.$e.emit(path.concat('.').concat(i), target[i]);\n\t\t\t} else {\n\t\t\t\t// var c = (target[i] === object[i]);\n\t\t\t\ttarget[i] = object[i];\n\t\t\t\t// if (c) SELF.$e.emit(path.concat('.').concat(i), target[i]);\n\t\t\t}\n\t\t\taddwatch(target, i);\n\t\t}\n\t}\n\n\t// function populate(to, path) {\n\t// \tif (typeof to !== 'object' || !to\n\t// \t\t|| /^this\\.\\$(?:parent|view|props|actions|state|link|e|html)$/.test(path)) return false;\n\t//   var ret = (typeof to.__path === 'undefined') ? Object.defineProperty(to, '__path', { value: path }) : false;\n\t//   for (var ii in to) {\n\t//     if (!Object.getOwnPropertyDescriptor(to, ii).set) {\n\t//       if (typeof to[ii] === 'object') populate(to[ii], path + '.' + ii)\n\t//       // Initiate watcher if not already watched\n\t//       watcher(to, ii)\n\t//       // Trigger changes for this path\n\t// \t\t\tSELF.$e.emit(path + '.' + ii, to[ii])\n\t//     }\n\t//   }\n\t// \treturn ret\n\t// }\n\t//\n\n\tSELF.$e = {\n\t\tWATCH: {},\n\t\tget(path) {\n\t\t\treturn SELF.$e.WATCH[path] || (SELF.$e.WATCH[path] = [])\n\t\t},\n\t\ton(path, fn) {\n\t\t\treturn SELF.$e.get(path).push(fn)\n\t\t},\n\t\temit(path, r) {\n\t\t\tvar list = SELF.$e.get(path), len = list.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tlist[i](path, r);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction watcher(targ, prop, handler) {\n\t  var oldval = targ[prop],\n\t    path = targ.__path + '.' + prop,\n\t    setter = function (newval) {\n\t      if (oldval !== newval) {\n\t        if (Array.isArray(oldval)) {\n\t\t\t\t\t\tvar ret;\n\t          if (this && this.constructor === String) {\n\t\t\t\t\t\t\tvar newval = clone(oldval);\n\t\t\t\t\t\t\tret = Array.prototype[this].apply(newval, arguments);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar l1 = oldval.length;\n\t\t\t\t\t\tvar l2 = newval.length;\n\t\t\t\t\t\tvar diff = l2 - l1;\n\n\t\t\t\t\t\tif (diff < 0) {\n\t\t\t\t\t\t\tfor (var i = l1; i > l1 + diff; i--) {\n\t\t\t\t\t\t\t\tdelete oldval[(i-1)];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldval.length = l2;\n\t\t\t\t\t\tapply(oldval, newval);\n\n\t\t\t\t\t\t// populate(oldval, path);\n\t\t\t\t\t\tSELF.$e.emit(path, oldval);\n\t\t\t\t\t\treturn ret;\n\t        } else if (typeof newval === 'object') {\n\t\t\t\t\t\t// oldval = clone(newval)\n\t\t\t\t\t\t// for (var i in newval) {\n\t\t\t\t\t\t\tapply(oldval, newval);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\t// populate(oldval, path);\n\t\t\t\t\t\tSELF.$e.emit(path, oldval);\n\t        } else {\n\t          oldval = newval;\n\t\t\t\t\t\t// populate(oldval, path);\n\t\t\t\t\t\tSELF.$e.emit(path, oldval);\n\t        }\n\t        return newval\n\t      } else {\n\t        return false\n\t      }\n\t    };\n\n\t  if (Array.isArray(oldval)) arrayMods(oldval, setter);\n\n\t  if (delete targ[prop]) {\n\t    Object.defineProperty(targ, prop, {\n\t      get: function () {\n\t        return oldval;\n\t      },\n\t      set: setter,\n\t      enumerable: true,\n\t      configurable: true\n\t    });\n\t  }\n\t}\n\n\tfor (var i in o.state) {\n\t\tif (typeof SELF.$state[i] === 'undefined') {\n\t\t\tSELF.$state[i] = o.state[i];\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write state for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tfor (var i in o.props) {\n\t\tif (typeof SELF.$state[i] === 'undefined') {\n\t\t\tif (isWatchable(o.props[i])) {\n\t\t\t\tSELF.$state[i] = o.props[i].get();\n\n\t\t\t\tif (o.props[i].parent) {\n\t\t\t\t\to.props[i].parent().$e.on(o.props[i].path, (e, a) => {\n\t\t\t\t\t\tSELF.$state[i] = a;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tSELF.$state[i] = o.props[i];\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write prop for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\t// var __slice = [].slice\n\t// SELF.$e = {\n\t// \tsubscriptions: [],\n\t// \ton(matcher, cbk) {\n\t// \t\tvar _base, _ref, _ref1, _ref2;\n\t//\n\t// \t\tif ((_ref1 = this.subscriptions) == null) {\n\t// \t\t\tthis.subscriptions = {};\n\t// \t\t}\n\t// \t\tif ((_ref2 = (_base = this.subscriptions)[matcher]) == null) {\n\t// \t\t\t_base[matcher] = [];\n\t// \t\t}\n\t// \t\tthis.subscriptions[matcher].push(cbk);\n\t//\n\t// \t\treturn this;\n\t// \t},\n\t// \tlisteners(evt) {\n\t// \t\tvar callbacks, key, subscription, _ref, _ref1;\n\t//\n\t// \t\tif ((_ref = this.subscriptions) == null) {\n\t// \t\t\tthis.subscriptions = {};\n\t// \t\t}\n\t// \t\tcallbacks = this.subscriptions[evt] || [];\n\t// \t\t_ref1 = this.regexpSubscriptions;\n\t// \t\tfor (key in _ref1) {\n\t// \t\t\tsubscription = _ref1[key];\n\t// \t\t\tif (subscription.regexp.test(evt)) {\n\t// \t\t\t\tcallbacks = callbacks.concat(subscription.callbacks);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t\treturn callbacks;\n\t// \t},\n\t// \temit() {\n\t// \t\tvar args, cbk, evt, _i, _len, _ref;\n\t//\n\t// \t\tevt = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\t// \t\t_ref = this.listeners(evt);\n\t// \t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t// \t\t\tcbk = _ref[_i];\n\t// \t\t\tcbk.call.apply(cbk, [this, evt].concat(__slice.call(args)));\n\t// \t\t}\n\t// \t\treturn this;\n\t// \t},\n\t// \toff(matcher, cbk) {\n\t// \t\tvar c, cbks, i, _i, _len, _ref;\n\t//\n\t// \t\tif (matcher == null) {\n\t// \t\t\tthis.subscriptions = {};\n\t// \t\t\tthis.regexpSubscriptions = {};\n\t// \t\t} else {\n\t// \t\t\tif (cbk == null) {\n\t// \t\t\t\tif ((_ref = this.subscriptions) != null) {\n\t// \t\t\t\t\tdelete _ref[matcher];\n\t// \t\t\t\t}\n\t// \t\t\t} else {\n\t// \t\t\t\tcbks = this.subscriptions[matcher] || [];\n\t// \t\t\t\tfor (i = _i = 0, _len = cbks.length; _i < _len; i = ++_i) {\n\t// \t\t\t\t\tc = cbks[i];\n\t// \t\t\t\t\tif (c === cbk) {\n\t// \t\t\t\t\t\tcbks.splice(i, 1);\n\t// \t\t\t\t\t}\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t}\n\t// \t\treturn this;\n\t// \t}\n\t// }\n\n\tapply(SELF, SELF.$state);\n\n\t// populate(SELF, 'this');\n\n\tfor (var i in o.actions) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tSELF[i] = (function() {\n\t\t\t\tif (frozenState) return null\n\t\t\t\treturn o.actions[this].apply(SELF, arguments);\n\t\t\t\t// populateOne(SELF, 'this');\n\t\t\t\t// triggerChanges(old, SELF, 'this')\n\t\t\t\t// return b\n\t\t\t}).bind(i);\n\n\t\t\t// (function(i) {\n\t\t\t// \tObject.defineProperty(SELF[i], 'props', {\n\t\t\t// \t\tvalue() {\n\t\t\t// \t\t\tvar args = arguments;\n\t\t\t// \t\t\treturn function () { return (frozenState) ? function () {} : SELF[i].apply(SELF, args, arguments) }\n\t\t\t// \t\t}\n\t\t\t// \t});\n\t\t\t// })(i)\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Error: Trying to write action for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tSELF.$id = ids++;\n\tSELF.$name = o.name;\n\tSELF.$state = o.state || {};\n\tSELF.$props = o.props || {};\n\tSELF.$actions = o.actions || {};\n\tSELF.$html = document.createDocumentFragment();\n\tSELF.$parent = null;\n\n\tSELF.$view = new Function('r','list','ll','cond','return ' + o.$view)(\n\t\tr.bind(SELF), list.bind(SELF), ll.bind(SELF), cond.bind(SELF)\n\t);\n\n\tSELF.$link = SELF.$view();\n\tSELF.$html.appendChild(SELF.$link);\n\n\tSELF.$render = function() {\n\t\tSELF.mount();\n\t\treturn SELF.$html\n\t};\n\n\t// SELF.$html.destroy = function () {\n\t// \tconst oldRootElem = SELF.$link.parentElement;\n\t// \tconst newRootElem = oldRootElem.cloneNode(false);\n\t// \toldRootElem.parentNode.insertBefore(newRootElem, oldRootElem);\n\t// \tSELF.unmount();\n\t// \toldRootElem.parentNode.removeChild(oldRootElem);\n\t// }\n\n\tSELF.mount = function () {\n\t\t// console.log('MOUNT', SELF.$name)\n\t\tif (typeof SELF.$actions.onMount === 'function') {\n\t\t\tSELF.$actions.onMount.call(SELF);\n\t\t}\n\t\tactiveComponents.push(SELF);\n\t};\n\n\tSELF.unmount = function () {\n\t\t// console.log('UNMOUNT', SELF.$name)\n\t\tif (typeof SELF.$actions.onDestroy === 'function') {\n\t\t\tSELF.$actions.onDestroy.call(SELF);\n\t\t}\n\t\tfor (var i = 0; i < activeComponents.length; i++) {\n\t\t\tif (activeComponents[i].$id === SELF.$id) {\n\t\t\t\tactiveComponents.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn SELF.$link;\n\t};\n\n\tSELF.$link.unmount = SELF.unmount.bind(SELF);\n\tSELF.$link.mount = SELF.mount.bind(SELF);\n\n\treturn SELF\n};\n\nvar radiMutate = function (c) {\n\t// // window.requestAnimationFrame(() => {\n\t// \t// window.requestAnimationFrame(() => {\n\t\t\tc();\n\t// \t// });\n\t// // });\n};\n\nvar setStyle = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (isWatchable(arg2)) {\n\t\tvar cache = arg2.get();\n\t\tel.style[arg1] = cache;\n\n\t\t// Update bind\n\t\t(function(cache, arg1, arg2){\n\t\t\tself.$e.on(arg2.path, function(e, v) {\n\t\t\t\tif (v === cache) return false\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tel.style[arg1] = v;\n\t\t\t\t});\n\t\t\t\tcache = v;\n\t\t\t});\n\t\t})(cache, arg1, arg2);\n\t} else if (arg2 !== undefined) {\n\t\tel.style[arg1] = arg2;\n\t} else if (isString(arg1)) {\n\t\tel.setAttribute('style', arg1);\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetStyle.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar setAttr = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (arg2 !== undefined) {\n\t\tif (arg1 === 'style') {\n\t\t\tsetStyle.call(this, el, arg2);\n\t\t} else if (arg1 === 'model' && isWatchable(arg2)) {\n\t\t\tvar cache = arg2.get();\n\t\t\tel.value = cache;\n\t\t\tel['oninput'] = function () { arg2.source[arg2.prop] = cache = el.value; self.$e.emit(arg2.path, el.value); };\n\t\t\t// Update bind\n\t\t\t(function(cache, arg1, arg2){\n\t\t\t\tself.$e.on(arg2.path, function(e, v) {\n\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tel.value = v;\n\t\t\t\t\t});\n\t\t\t\t\tcache = v;\n\t\t\t\t});\n\t\t\t})(cache, arg1, arg2);\n\t\t} else if (isFunction(arg2)) {\n\t\t\tel[arg1] = function (e) { arg2.call(self, e); };\n\t\t} else if (isWatchable(arg2)) {\n\t\t\tvar temp = arg2.get();\n\t\t\tif (isFunction(temp)) {\n\t\t\t\tel[arg1] = function (e) { arg2.get().call(self, e); };\n\t\t\t} else {\n\t\t\t\tvar cache = arg2.get();\n\t\t\t\tlet z = el.setAttribute(arg1, cache);\n\n\t\t\t\t// Update bind\n\t\t\t\t(function(cache, arg1, arg2){\n\t\t\t\t\tself.$e.on(arg2.path, function(e, v) {\n\t\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\t\tel.setAttribute(arg1, v);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcache = v;\n\t\t\t\t\t});\n\t\t\t\t})(cache, arg1, arg2);\n\t\t\t}\n\t\t} else {\n\t\t\tel.setAttribute(arg1, arg2);\n\t\t}\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetAttr.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\nvar isWatchable = function (a) { return a && a instanceof NW; };\nvar isCondition = function (a) { return a && a instanceof Condition; };\nvar isComponent = function (a) { return a && a.__radi; };\n\nconst text = function (str) { return document.createTextNode(str); };\n\nvar radiArgs = function (element, args) {\n\tvar self = this;\n\tfor (var i = 0; i < args.length; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (arg !== 0 && !arg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// support middleware\n\t\tif (isComponent(arg)) {\n\t\t\telement.appendChild(arg.__radi().$render());\n\t\t} else if (isCondition(arg)) {\n\t\t\tvar arg2 = arg.__do(), a, id = arg2.id;\n\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\ta = arg2.r.__radi().$render();\n\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\ta = arg2.r();\n\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\ta = text(arg2.r);\n\t\t\t} else {\n\t\t\t\ta = arg2.r;\n\t\t\t}\n\t\t\telement.appendChild(a);\n\t\t\t(function(arg){\n\t\t\t\targ.watch(function(v) {\n\t\t\t\t\tvar arg2 = arg.__do(), b;\n\t\t\t\t\tif (id === arg2.id) return false\n\t\t\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\t\t\tb = arg2.r.__radi().$render();\n\t\t\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\t\t\tb = arg2.r();\n\t\t\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\t\t\tb = text(arg2.r);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tb = arg2.r;\n\t\t\t\t\t}\n\t\t\t\t\t// unmountAll(a)\n\t\t\t\t\ta.parentNode.replaceChild(b, a);\n\t\t\t\t\ta = b;\n\t\t\t\t\t// mountAll(a)\n\t\t\t\t\tid = arg2.id;\n\t\t\t\t});\n\t\t\t})(arg);\n\t\t} else if (typeof arg === 'function') {\n\t\t\targ.call(this, element);\n\t\t} else if (isString(arg) || isNumber(arg)) {\n\t\t\telement.appendChild(text(arg));\n\t\t} else if (isNode(getEl(arg))) {\n\t\t\telement.appendChild(arg);\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tradiArgs.call(this, element, arg);\n\t\t} else if (isWatchable(arg)) {\n\t\t\tvar cache = arg.get();\n\t\t\tlet z = text(cache);\n\t\t\telement.appendChild(z);\n\n\t\t\t// Update bind\n\t\t\t(function(cache, arg){\n\t\t\t\tself.$e.on(arg.path, function(e, v) {\n\t\t\t\t\tif (v === cache) return false\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tz.textContent = v;\n\t\t\t\t\t});\n\t\t\t\t\tcache = v;\n\t\t\t\t});\n\t\t\t})(cache, arg);\n\t\t} else if (typeof arg === 'object') {\n\t\t\tsetAttr.call(this, element, arg);\n\t\t}\n\n\t}\n};\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nconst r = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar element;\n\n\tif (isString(query)) {\n\t\telement = memoizeHTML(query).cloneNode(false);\n\t} else if (isNode(query)) {\n\t\telement = query.cloneNode(false);\n\t} else {\n\t\telement = document.createDocumentFragment();\n\t}\n\n\tradiArgs.call(this, element, args);\n\n\treturn element;\n};\nr.extend = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar clone = memoizeHTML(query);\n\n\treturn r.bind.apply(r, [ this, clone ].concat( args ));\n};\n\nconst component = function (o) {\n\tvar fn = o.view.toString().replace(STRIP_COMMENTS, '');\n\tvar match = FIND_L.exec(fn);\n\t// var output = [];\n\tvar output = '';\n\tvar cursor = 0;\n\n\twhile (match !== null) {\n\t\tvar n = match.index,\n\t\t\tall = match.input,\n\t\t\t_l = 1,\n\t\t\t_r = 0;\n\n\t\tconst len = all.length;\n\n\t\tfor (var i = n + 2; i < len; i++) {\n\t\t\tvar char = all.charCodeAt(i);\n\t\t\tif (char === RL) {\n\t\t\t\t_l += 1;\n\t\t\t} else\n\t\t\tif (char === RR) {\n\t\t\t\t_r += 1;\n\t\t\t}\n\t\t\tif (_l === _r) break;\n\t\t}\n\n\t\tvar found = all.substr(n, i + 1 - n);\n\n\t\tvar m = found.match(/[a-zA-Z_$]+(?:\\.\\w+(?:\\[.*\\])?)+/g) || [];\n\t\t// var obs = (m.length > 0) ? m.join('__ob__,') + '__ob__' : '';\n\t\tvar obs = [];\n\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\tvar temp = m[i].split('.');\n\t\t\tif (temp.length > 1) {\n\t\t\t\tvar last = temp.splice(-1)[0];\n\t\t\t\tobs.push('[' + temp.join('.') + ', \"' + last + '\"]');\n\t\t\t}\n\t\t}\n\t\tvar obs = obs.join(',');\n\t\tvar newString = 'll(function(){ return ' + found.substr(1) + '; },[' + obs + '], \"' + m.join(',') + '\")';\n\n\t\t// output.push(fn.substr(cursor, n - cursor));\n\t\toutput = output.concat(fn.substr(cursor, n - cursor));\n\t\t// output.push(newString);\n\t\toutput = output.concat(newString);\n\t\tcursor = n + found.length;\n\n\t\tmatch = FIND_L.exec(fn);\n\t}\n\t// output.push(fn.substr(cursor, fn.length - cursor));\n\toutput = output.concat(fn.substr(cursor, fn.length - cursor));\n\t// o.$view = output.join('');\n\to.$view = output;\n\n\treturn Component.bind(this, o);\n};\nvar Component = function Component (o) {\n\tthis.o = {\n\t\tname: o.name,\n\t\tstate: clone(o.state),\n\t\tprops: clone(o.props),\n\t\tactions: o.actions,\n\t\tview: o.view,\n\t\t$view: o.$view,\n\t};\n\n\tthis.__radi = function() { return new Radi(this.o); };\n};\nComponent.prototype.props = function props (p) {\n\tfor (var k in p) {\n\t\tif (typeof this.o.props[k] === 'undefined') {\n\t\t\tconsole.warn('[Radi.js] Warn: Creating a prop `', k, '` that is not defined in component');\n\t\t}\n\t\tthis.o.props[k] = p[k];\n\t}\n\treturn this;\n};\n\nconst mount = function (comp, id) {\n\tconst where = (id.constructor === String) ? document.getElementById(id) : id;\n\tvar out = (comp instanceof Component) ? comp.__radi().$render() : comp;\n\twhere.appendChild(out);\n\treturn out;\n};\n\nvar emptyNode = text('');\n\nconst list = function (data, act) {\n\tif (!data) return '';\n\tvar SELF = this;\n\n\tvar link, fragment = document.createDocumentFragment(), toplink = emptyNode.cloneNode();\n\n\tfragment.appendChild(toplink);\n\n\tvar cache = data.source[data.prop];\n\n\tif (isArray(cache)) {\n\t\tfor (var i = 0; i < cache.length; i++) {\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, cache[i], i)\n\t\t\t);\n\t\t}\n\t} else {\n\t\tvar i = 0;\n\t\tfor (var key in cache) {\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, cache[key], key, i)\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t}\n\n\tlink = fragment.lastChild;\n\n\tvar w = function(a, b) {\n\t\tif (a > 0) {\n\t\t\tvar len = b.length;\n\t\t\tvar start = len - a;\n\t\t\tfor (var i = start; i < len; i++) {\n\t\t\t\tfragment.appendChild(\n\t\t\t\t\tact.call(SELF, data.source[data.prop][i], i)\n\t\t\t\t);\n\t\t\t}\n\t\t\tvar temp = fragment.lastChild;\n\t\t\tlink.parentElement.insertBefore(fragment, link.nextSibling);\n\t\t\tlink = temp;\n\t\t} else\n\t\tif (a < 0) {\n\t\t\tfor (var i = 0; i < Math.abs(a); i++) {\n\t\t\t\tvar templink = link.previousSibling;\n\t\t\t\tlink.parentElement.removeChild(link);\n\t\t\t\tlink = templink;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (data.path) {\n\t\tvar len = cache.length;\n\t\tSELF.$e.on(data.path, function(e, v) {\n\t\t\tw(v.length - len, v);\n\t\t\tlen = v.length;\n\t\t});\n\t}\n\n\treturn fragment;\n};\n\n\nfunction NW(source, prop, path, parent) {\n  this.path = ((path) ? path : source.__path) + '.' + prop;\n  this.get = () => (source[prop]);\n  this.source = source;\n  this.prop = prop;\n  this.parent = () => (parent);\n}\n\nvar linkNum = 0;\n\nconst link = function (fn, watch, txt) {\n\tvar args = {}, SELF = this;\n\n\tif (txt.length === 1 && fn.toString()\n\t\t\t\t.replace(/(function \\(\\)\\{ return |\\(|\\)|\\; \\})/g, '')\n\t\t\t\t.trim() === txt[0]) {\n\t\treturn new NW(watch[0][0], watch[0][1])\n\t}\n\n\tvar len = watch.length;\n\n\targs.s = fn.call(SELF);\n\targs.__path = '$link-' + (linkNum++);\n\n\tfor (var i = 0; i < len; i++) {\n\t\t(function(path, args, p, i) {\n\t\t\tSELF.$e.on(path, (e) => {\n\t\t\t\tvar cache = fn.call(SELF);\n\n\t\t\t\tif (args.s !== cache) {\n\t\t\t\t\targs.s = cache;\n\t\t\t\t\tSELF.$e.emit(p, args.s);\n\t\t\t\t}\n\t\t\t});\n\t\t})(watch[i][0].__path + '.' + watch[i][1], args, args.__path.concat('.s'), i);\n\t}\n\n\tif (len <= 0) return args.s;\n\treturn new NW(args, 's', null, this);\n};\n\n// export const link = function (fn, watch, txt) {\n// \tvar args = {s: null,a: [],t: [],f: fn.toString()}, SELF = this;\n//\n// \tif (txt.length === 1 && fn.toString()\n// \t\t\t\t.replace(/(function \\(\\)\\{ return |\\(|\\)|\\; \\})/g, '')\n// \t\t\t\t.trim() === txt[0]) {\n// \t\treturn new NW(watch[0][0], watch[0][1], null, this)\n// \t}\n//\n// \tvar len = watch.length\n//\n// \targs.s = fn.call(this);\n// \targs.a = new Array(len);\n// \targs.t = new Array(len);\n// \targs.__path = '$link-' + linkNum;\n// \tlinkNum += 1;\n//\n// \tfor (var i = 0; i < len; i++) {\n// \t\targs.a[i] = watch[i][0][watch[i][1]];\n// \t\targs.t[i] = '$rdi[' + i + ']';\n// \t\targs.f = args.f.replace(txt[i], args.t[i]);\n// \t\t// args.f = args.f.replace(new RegExp(txt[i], 'g'), args.t[i]);\n// \t\t(function(path, args, p, i) {\n// \t\t\tSELF.$e.on(path, (e, v) => {\n// \t\t\t\targs.a[i] = v;\n// \t\t\t\tvar cache = args.f.call(SELF, args.a)\n//\n// \t\t\t\tif (args.s !== cache) {\n// \t\t\t\t\targs.s = cache;\n// \t\t\t\t\tSELF.$e.emit(p, args.s);\n// \t\t\t\t}\n// \t\t\t});\n// \t\t})(watch[i][0].__path + '.' + watch[i][1], args, args.__path + '.s', i)\n// \t}\n//\n// \targs.f = new Function('$rdi', 'return ' + args.f + '();')\n//\n// \tif (len <= 0) return args.s;\n// \treturn new NW(args, 's', args.__path, this);\n// }\n\nconst cond = function (a, e) {\n\treturn new Condition(a, e, this)\n};\nvar Condition = function Condition (a, e, SELF) {\n\tthis.cases = [{a:a,e:e}];\n\tthis.w = [];\n\tthis.cache = [];\n\tthis.els = emptyNode.cloneNode();\n\n\tif (isWatchable(a)) { this.w.push(a); }\n\n\tthis.watch = function(cb) {\n\t\t// console.log('LOAD WATCH', this.w);\n\t\tfor (var w in this.w) {\n\t\t\t// this.cache[w] = this.w[w].get();\n\t\t\t(function(w) {\n\t\t\t\tSELF.$e.on(this.w[w].path, (e) => {\n\t\t\t\t\t// console.log(this.w[w].path, this.cache[w] == v, this.cache[w], v)\n\t\t\t\t\t// if (this.cache[w] == v) return false;\n\t\t\t\t\tcb(this.w[w].get());\n\t\t\t\t\t// this.cache[w] = v;\n\t\t\t\t});\n\t\t\t}).call(this,w);\n\t\t}\n\t};\n\n\tthis.__do = function() {\n\t\tvar ret = {id: null};\n\t\tfor (var c in this.cases) {\n\t\t\tvar a = isWatchable(this.cases[c].a) ? this.cases[c].a.get() : this.cases[c].a;\n\t\t\tif (a) {\n\t\t\t\tret.id = c;\n\t\t\t\tret.r = this.cases[c].e;\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (typeof ret.r === 'undefined') ret.r = this.els;\n\t\treturn ret\n\t};\n};\nCondition.prototype.elseif = function (a, e) {\n\tthis.cases.push({a:a,e:e});\n\tif (isWatchable(a)) { this.w.push(a); }\n\treturn this\n};\nCondition.prototype.cond = Condition.prototype.elseif;\nCondition.prototype.else = function (e) {\n\tthis.els = e;\n\treturn this\n};\n\nconst l = function (f) {\n\treturn f\n};\n\nconst ll = function (f, w, c) {\n\tif (!w) {\n\t\treturn f\n\t} else {\n\t\treturn link.call(this, f, w, c.split(','))\n\t}\n};\n\nconst freeze = () => { frozenState = true; };\nconst unfreeze = () => {\n\tfrozenState = false;\n\n\tfor (var ii = 0; ii < activeComponents.length; ii++) {\n\t\tif (typeof activeComponents[ii].onMount === 'function') {\n\t\t\tactiveComponents[ii].onMount.call(activeComponents[ii]);\n\t\t}\n\t}\n};\n\nexports.version = version;\nexports.activeComponents = activeComponents;\nexports.text = text;\nexports.r = r;\nexports.component = component;\nexports.mount = mount;\nexports.list = list;\nexports.link = link;\nexports.cond = cond;\nexports.l = l;\nexports.ll = ll;\nexports.freeze = freeze;\nexports.unfreeze = unfreeze;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=radi.js.map\n"]}
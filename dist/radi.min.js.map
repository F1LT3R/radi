{"version":3,"sources":["dist/radi.js"],"names":["global","factory","exports","module","define","amd","radi","this","STRIP_COMMENTS","FIND_L","RL","charCodeAt","RR","HASH","DOT","frozenState","_op","Object","prototype","isObject","o","__proto__","isArray","Array","clone","obj","i","ret","toString","call","len","length","hasOwnProperty","defineProperties","relocate","configurable","enumerable","value","what","wit","key","end","change","Radi","constructor","populateOne","writable","arrayRules","item","def","bucket","a","v","l1","arr","apply","arguments","l2","diff","_r_set","_r_get","cb","push","pop","splice","shift","unshift","reverse","ii","__r","watchable","populate","__path","pr","path","data","prop","Watchable","temp","watch","c","watcher","p","prev","next","get","dsc","getOwnPropertyDescriptor","targ","handler","set","createElement","query","ns","ref","tag","id","className","mode","buffer","char","isHash","isDot","parseQuery","element","document","createElementNS","setAttribute","arg","ids","activeComponents","SELF","state","Error","props","isWatchable","actions","act","$id","$name","name","$state","$props","$actions","$html","createDocumentFragment","$view","Function","r","bind","list","l","cond","$render","$link","unmount","appendChild","mount","onMount","onDestroy","unmountAll","el","children","setStyle","view","arg1","arg2","getEl","style","undefined","isString","setAttr","self","isFunction","e","parent","nodeType","isNumber","isNode","isCondition","Condition","isComponent","__radi","text","str","createTextNode","radiArgs","args","__do","b","parentNode","replaceChild","z","htmlCache","memoizeHTML","cloneNode","extend","concat","Component","k","console","warn","emptyNode","link","fragment","toplink","inst","lastChild","w","parentElement","insertBefore","nextSibling","Math","abs","templink","previousSibling","removeChild","fn","txt","n","s","f","replace","trim","cases","els","elseif","else","split","version","component","match","exec","output","cursor","index","all","input","_l","_r","found","substr","m","obs","join","newString","comp","where","String","getElementById","out","freeze","unfreeze"],"mappings":"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","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.radi = {})));\n}(this, (function (exports) { 'use strict';\n\nconst version = '0.0.5';\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar FIND_L = /\\bl\\(/g;\n\nvar RL = '('.charCodeAt(0);\nvar RR = ')'.charCodeAt(0);\nvar HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAGNAME = 0;\nvar ID = 1;\nvar CLASSNAME = 2;\n\nvar frozenState = false;\n\nvar _op = Object.prototype;\nvar isObject = function (o) { return o && o.__proto__ === _op };\nvar isArray = function (o) { return Array.isArray(o) === true };\n\nfunction clone(obj) {\n\tvar i, ret;\n\tif (typeof obj === \"object\") {\n\t\tif (obj === null) return obj;\n\t\tif (Object.prototype.toString.call(obj) === \"[object Array]\") {\n\t\t\tvar len = obj.length;\n\t\t\tret = new Array(len);\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (typeof obj[i] === \"object\") {\n\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t} else {\n\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tret = {};\n\t\t\tfor (i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\tif (typeof(obj[i] === \"object\")) {\n\t\t\t\t\t\tret[i] = clone(obj[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tret = obj;\n\t}\n\n\treturn ret;\n}\n\nObject.defineProperties(Object, {\n\trelocate: {\n\t\tconfigurable: true,\n\t\tenumerable: false,\n\t\tvalue: function relocate(what, wit) {\n\t\t\tfor (var key in wit) {\n\t\t\t\tconst end = wit[key];\n\t\t\t\tvar change = false;\n\t\t\t\tif (end && typeof end === 'object' && !(end instanceof Radi)) {\n\t\t\t\t\tif (typeof what[key] === 'undefined') what[key] = end.constructor();\n\t\t\t\t\tObject.relocate(what[key], end);\n\t\t\t\t\tchange = true;\n\t\t\t\t} else {\n\t\t\t\t\tif (what[key] !== end) {\n\t\t\t\t\t\tchange = true;\n\t\t\t\t\t\twhat[key] = end;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (change) {\n\t\t\t\t\tpopulateOne(what, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twritable: true\n\t}\n});\n\nvar arrayProxy = function arrayProxy() {\n\tvar l1 = this[0].length,\n\t\t\tarr = clone(this[0]),\n\t\t\t// arr = this[0],\n\t\t\tret = Array.prototype[this[1]].apply(arr, arguments),\n\t\t\tl2 = arr.length,\n\t\t\tdiff = l2 - l1;\n\n\tthis[0].length = l2;\n\n\tif (diff < 0) {\n\t\tfor (var i = l1; i > l1 + diff; i--) {\n\t\t\tdelete this[0][(i-1)+'__ob__'];\n\t\t\tdelete this[0][(i-1)];\n\t\t}\n\t}\n\n\tObject.relocate(this[0], arr);\n\n\tif (diff !== 0) {\n\t\tthis[0]._r_set(diff, this[0]);\n\t}\n\n\treturn ret\n};\n\nvar arrayRules = function arrayRules(item, def) {\n\t// TODO: Creaete _r_set loop with array of bucket\n\t// var bucket = []\n\tvar bucket = () => {},\n\t\ta = (v) => ({ value: function () { return arrayProxy.apply([this, v], arguments) } });\n\tdef._r_set = { value: function (v) { if (frozenState) return false; bucket(v, item); } };\n\tdef._r_get = { value: function (cb) { bucket = cb; } };\n\tdef.push = a('push');\n\tdef.pop = a('pop');\n\tdef.splice = a('splice');\n\tdef.shift = a('shift');\n\tdef.unshift = a('unshift');\n\tdef.reverse = a('reverse');\n};\n\nvar populateOne = function populateOne(item, ii) {\n\tif (typeof item[ii + '__ob__'] !== 'undefined') return false\n\n\tvar def = { __r: { value: true } };\n\n\t// If input is an Array\n\tif (isArray(item) && typeof item.__r === 'undefined' && !item.__r) {\n\t\tarrayRules(item, def);\n\t}\n\n\tdef[ii + '__ob__'] = { value: watchable(item, ii), configurable: true };\n\n\tif (typeof item[ii] === 'object') populate(item[ii], item.__path + '.' + ii);\n\n\treturn Object.defineProperties(item, def)\n};\n\n// Add watchers to every object and array\nvar populate = function populate(item, pr) {\n\tvar path = (typeof pr === 'undefined') ? 'this' : pr;\n\tif (item && typeof item === 'object') {\n\t\tvar def = { __r: { value: true }, __path: { value: path } };\n\n\t\t// If input is an Array\n\t\tif (isArray(item)) {\n\t\t\tif (typeof item.__r === 'undefined' && !item.__r) {\n\t\t\t\tarrayRules(item, def);\n\t\t\t}\n\n\t\t\tfor (var ii in item) {\n\t\t\t\t// Add watchable\n\t\t\t\t// Should not be able to reconfigure this\n\t\t\t\tif (typeof item[ii + '__ob__'] === 'undefined') {\n\t\t\t\t\tdef[ii + '__ob__'] = { value: watchable(item, ii), configurable: true };\n\t\t\t\t\tpopulate(item[ii], path + '.' + ii);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else\n\t\t// If input is an Object\n\t\tif (isObject(item)) {\n\n\t\t\tfor (var ii in item) {\n\t\t\t\t// Add watchable\n\t\t\t\t// Should not be able to reconfigure this\n\t\t\t\tif (typeof item[ii + '__ob__'] === 'undefined') {\n\t\t\t\t\tdef[ii + '__ob__'] = { value: watchable(item, ii), configurable: true };\n\t\t\t\t\tpopulate(item[ii], path + '.' + ii);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn Object.defineProperties(item, def)\n\t} else { return false }\n};\n\nvar watchable = function (data, prop) { return new Watchable(data, prop) };\n\nvar Watchable = function Watchable (data, prop) {\n\tvar temp = data;\n\n\tthis.watch = function watch (c) {\n\t\twatcher(temp, prop, (p, prev, next) => {\n\t\t\tc(next, prev);\n\t\t\treturn next\n\t\t});\n\t};\n\n\tthis.prop = prop;\n\tthis.data = function data () {\n\t\treturn temp\n\t};\n\n\tthis.get = function get () {\n\t\treturn temp[prop]\n\t};\n};\n\nvar dsc = Object.getOwnPropertyDescriptor;\nvar watcher = function watcher(targ, prop, handler) {\n\t// console.warn('Watcher', targ, targ.__path, prop)\n\tvar oldval = targ[prop],\n\t\tprev = (typeof dsc(targ, prop) !== 'undefined') ? dsc(targ, prop).set : null,\n\t\tsetter = function (newval) {\n\t\t\tif (frozenState) return false\n\t\t\tif (oldval !== newval) {\n\t\t\t\tif (isObject(newval)) {\n\n\t\t\t\t\tObject.relocate(oldval, newval);\n\t\t\t\t} else\n\t\t\t\tif (isArray(newval)) {\n\t\t\t\t\tvar diff = newval.length - oldval.length;\n\t\t\t\t\toldval.length = newval.length;\n\n\t\t\t\t\tObject.relocate(oldval, newval);\n\t\t\t\t\tnewval = diff;\n\t\t\t\t} else {\n\t\t\t\t\toldval = newval;\n\t\t\t\t}\n\t\t\t\tif (typeof prev === 'function') prev(newval);\n\t\t\t\thandler.call(targ, prop, oldval, newval);\n\t\t\t\t// TODO: Make actual triggers\n\t\t\t\t// if (typeof targ.__path !== 'undefined') {\n\t\t\t\t// \tconsole.warn('Trigger', targ.__path + '.' + prop)\n\t\t\t\t// }\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t};\n\n\tif (delete targ[prop]) {\n\t\tObject.defineProperty(targ, prop, {\n\t\t\tget: function () {\n\t\t\t\treturn oldval;\n\t\t\t},\n\t\t\tset: setter,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t}\n};\n\n\nvar parseQuery = function (query) {\n\tvar tag = null;\n\tvar id = null;\n\tvar className = null;\n\tvar mode = TAGNAME;\n\tvar buffer = '';\n\n\tfor (var i = 0; i <= query.length; i++) {\n\t\tvar char = query.charCodeAt(i);\n\t\tvar isHash = char === HASH;\n\t\tvar isDot = char === DOT;\n\t\tvar isEnd = !char;\n\n\t\tif (isHash || isDot || isEnd) {\n\t\t\tif (mode === TAGNAME) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\ttag = 'div';\n\t\t\t\t} else {\n\t\t\t\t\ttag = buffer;\n\t\t\t\t}\n\t\t\t} else if (mode === ID) {\n\t\t\t\tid = buffer;\n\t\t\t} else {\n\t\t\t\tif (className) {\n\t\t\t\t\tclassName += ' ' + buffer;\n\t\t\t\t} else {\n\t\t\t\t\tclassName = buffer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isHash) {\n\t\t\t\tmode = ID;\n\t\t\t} else if (isDot) {\n\t\t\t\tmode = CLASSNAME;\n\t\t\t}\n\n\t\t\tbuffer = '';\n\t\t} else {\n\t\t\tbuffer += query[i];\n\t\t}\n\t}\n\n\treturn { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n\tvar ref = parseQuery(query);\n\tvar tag = ref.tag;\n\tvar id = ref.id;\n\tvar className = ref.className;\n\tvar element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n\tif (id) {\n\t\telement.id = id;\n\t}\n\n\tif (className) {\n\t\tif (ns) {\n\t\t\telement.setAttribute('class', className);\n\t\t} else {\n\t\t\telement.className = className;\n\t\t}\n\t}\n\n\treturn element;\n};\n\nif (!Array.isArray) {\n\tArray.isArray = function(arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\n\nvar ids = 0;\nconst activeComponents = [];\n\nvar Radi = function(o) {\n\tvar SELF = {};\n\n\t// var remap = function(o, n) {\n\t// \ttriggerChanges(o, n, 'this')\n\t// }\n\t//\n\t// SELF.$set = function $set(path, value) {\n\t// \tvar p = path.replace('this.', '').split('.'),\n\t// \t\ttarget = SELF\n\t// \tfor (var i = 0; i < p.length - 1; i++) {\n\t// \t\ttarget = SELF[p[i]]\n\t// \t}\n\t// \ttarget[p[i]] = value\n\t// \ttrigger(path)\n\t// \treturn value\n\t// }\n\t//\n\t// var linkedActions = function(a) {\n\t// \tvar n = {}\n\t// \tfor (var i in a) {\n\t// \t\tn[i] = (function() {\n\t// \t\t\tvar old = clone(SELF)\n\t// \t\t\tvar b = this.apply(SELF, arguments)\n\t// \t\t\tremap(old, SELF)\n\t// \t\t\treturn b\n\t// \t\t}).bind(a[i])\n\t// \t}\n\t// \treturn n\n\t// }\n\n\tfor (var i in o.state) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tSELF[i] = o.state[i];\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write state for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tfor (var i in o.props) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tif (isWatchable(o.props[i])) {\n\t\t\t\tSELF[i] = o.props[i].get();\n\t\t\t\to.props[i].watch(function (a) {\n\t\t\t\t\tSELF[i] = a;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tSELF[i] = o.props[i];\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Err: Trying to write prop for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tpopulate(SELF);\n\n\tfor (var i in o.actions) {\n\t\tif (typeof SELF[i] === 'undefined') {\n\t\t\tconst act = o.actions[i];\n\t\t\tSELF[i] = function () { return (frozenState) ? function () {} : act.apply(SELF, arguments) };\n\n\t\t\t(function(i) {\n\t\t\t\tObject.defineProperty(SELF[i], 'props', {\n\t\t\t\t\tvalue() {\n\t\t\t\t\t\tvar args = arguments;\n\t\t\t\t\t\treturn function () { return (frozenState) ? function () {} : SELF[i].apply(SELF, args, arguments) }\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})(i);\n\t\t} else {\n\t\t\tthrow new Error('[Radi.js] Error: Trying to write action for reserved variable `' + i + '`');\n\t\t}\n\t}\n\n\tSELF.$id = ids++;\n\tSELF.$name = o.name;\n\tSELF.$state = o.state || {};\n\tSELF.$props = o.props || {};\n\tSELF.$actions = o.actions || {};\n\tSELF.$html = document.createDocumentFragment();\n\n\t// Object.assign(SELF, SELF.$state)\n\t// Object.assign(SELF, linkedActions(SELF.$actions))\n\n\tSELF.$view = new Function('r','list','l','cond','return ' + o.$view)(\n\t\tr.bind(SELF), list.bind(SELF), l.bind(SELF), cond.bind(SELF)\n\t);\n\n\tSELF.$render = function() {\n\t\tSELF.$link = SELF.$view();\n\t\tSELF.$link.unmount = SELF.unmount.bind(SELF);\n\t\tSELF.$html.appendChild(SELF.$link);\n\t\tSELF.mount();\n\t\treturn SELF.$html\n\t};\n\n\t// SELF.$html.destroy = function () {\n\t// \tconst oldRootElem = SELF.$link.parentElement;\n\t// \tconst newRootElem = oldRootElem.cloneNode(false);\n\t// \toldRootElem.parentNode.insertBefore(newRootElem, oldRootElem);\n\t// \tSELF.unmount();\n\t// \toldRootElem.parentNode.removeChild(oldRootElem);\n\t// }\n\n\tSELF.mount = function () {\n\t\tif (typeof SELF.$actions.onMount === 'function') {\n\t\t\tSELF.$actions.onMount.call(SELF);\n\t\t}\n\t\tactiveComponents.push(SELF);\n\t};\n\n\tSELF.unmount = function () {\n\t\tif (typeof SELF.$actions.onDestroy === 'function') {\n\t\t\tSELF.$actions.onDestroy.call(SELF);\n\t\t}\n\t\tfor (var i = 0; i < activeComponents.length; i++) {\n\t\t\tif (activeComponents[i].$id === SELF.$id) {\n\t\t\t\tactiveComponents.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn SELF.$link;\n\t};\n\n\t// SELF.$link.unmount = SELF.unmount.bind(SELF)\n\t// SELF.$remount = function () {\n\t// \tthis.mount();\n\t// \treturn this.link\n\t// }\n\t// SELF.$out = function () {\n\t// \tthis.mount();\n\t// \treturn this.$html;\n\t// }\n\n\treturn SELF\n};\n\nvar unmountAll = function unmountAll(el) {\n\tif (typeof el.unmount === 'function') el.unmount();\n\tif (el.children && el.children.length > 0) {\n\t\tfor (var i = 0; i < el.children.length; i++) {\n\t\t\tunmountAll(el.children[i]);\n\t\t}\n\t}\n};\n\nvar radiMutate = function (c) {\n\t// window.requestAnimationFrame(() => {\n\t\t// window.requestAnimationFrame(() => {\n\t\t\tc();\n\t\t// });\n\t// });\n};\n\nvar setStyle = function (view, arg1, arg2) {\n\tvar el = getEl(view);\n\n\tif (isWatchable(arg2)) {\n\t\tel.style[arg1] = arg2.get();\n\t\t// Update bind\n\t\targ2.watch((a) => {\n\t\t\tradiMutate(() => {\n\t\t\t\tel.style[arg1] = a;\n\t\t\t});\n\t\t});\n\t} else if (arg2 !== undefined) {\n\t\tel.style[arg1] = arg2;\n\t} else if (isString(arg1)) {\n\t\tel.setAttribute('style', arg1);\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetStyle(el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar setAttr = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (arg2 !== undefined) {\n\t\tif (arg1 === 'style') {\n\t\t\tsetStyle(el, arg2);\n\t\t} else if (arg1 === 'model' && isWatchable(arg2)) {\n\t\t\tel.value = arg2.get();\n\t\t\tel['oninput'] = function () { arg2.data()[arg2.prop] = el.value; };\n\t\t\targ2.watch(function (a) {\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tel.value = a;\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (isFunction(arg2)) {\n\t\t\tel[arg1] = function (e) { arg2.call(self, e); };\n\t\t} else if (isWatchable(arg2)) {\n\t\t\tvar temp = arg2.get();\n\t\t\tif (isFunction(temp)) {\n\t\t\t\tel[arg1] = function (e) { arg2.get().call(self, e); };\n\t\t\t} else {\n\t\t\t\tel.setAttribute(arg1, arg2.get());\n\t\t\t\t// Update bind\n\t\t\t\targ2.watch(function (a) {\n\t\t\t\t\tradiMutate(() => {\n\t\t\t\t\t\tel.setAttribute(arg1, a);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tel.setAttribute(arg1, arg2);\n\t\t}\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetAttr.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\nvar isWatchable = function (a) { return a && a instanceof Watchable; };\nvar isCondition = function (a) { return a && a instanceof Condition; };\nvar isComponent = function (a) { return a && a.__radi; };\n\nconst text = function (str) { return document.createTextNode(str); };\n\nvar radiArgs = function (element, args) {\n\tfor (var i = 0; i < args.length; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (arg !== 0 && !arg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// support middleware\n\t\tif (isComponent(arg)) {\n\t\t\telement.appendChild(arg.__radi().$render());\n\t\t} else if (isCondition(arg)) {\n\t\t\tvar arg2 = arg.__do(), a, id = arg2.id;\n\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\ta = arg2.r.__radi().$render();\n\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\ta = arg2.r();\n\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\ta = text(arg2.r);\n\t\t\t} else {\n\t\t\t\ta = arg2.r;\n\t\t\t}\n\t\t\telement.appendChild(a);\n\t\t\t(function(arg){arg.watch(function(v) {\n\t\t\t\tvar arg2 = arg.__do(), b;\n\t\t\t\tif (id === arg2.id) return false\n\t\t\t\tif (isComponent(arg2.r)) {\n\t\t\t\t\tb = arg2.r.__radi().$render();\n\t\t\t\t} else if (typeof arg2.r === 'function') {\n\t\t\t\t\tb = arg2.r();\n\t\t\t\t} else if (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\t\tb = text(arg2.r);\n\t\t\t\t} else {\n\t\t\t\t\tb = arg2.r;\n\t\t\t\t}\n\t\t\t\tunmountAll(a);\n\t\t\t\ta.parentNode.replaceChild(b, a);\n\t\t\t\ta = b;\n\t\t\t\tid = arg2.id;\n\t\t\t});})(arg);\n\t\t} else if (typeof arg === 'function') {\n\t\t\targ.call(this, element);\n\t\t} else if (isString(arg) || isNumber(arg)) {\n\t\t\telement.appendChild(text(arg));\n\t\t} else if (isNode(getEl(arg))) {\n\t\t\telement.appendChild(arg);\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tradiArgs.call(this, element, arg);\n\t\t} else if (isWatchable(arg)) {\n\t\t\tlet z = text(arg.get());\n\t\t\telement.appendChild(z);\n\t\t\t// Update bind\n\t\t\targ.watch(function (a) {\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tz.textContent = a;\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (typeof arg === 'object') {\n\t\t\tsetAttr.call(this, element, arg);\n\t\t}\n\n\t}\n};\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nconst r = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar element;\n\n\tif (isString(query)) {\n\t\telement = memoizeHTML(query).cloneNode(false);\n\t} else if (isNode(query)) {\n\t\telement = query.cloneNode(false);\n\t} else {\n\t\telement = document.createDocumentFragment();\n\t}\n\n\tradiArgs.call(this, element, args);\n\n\treturn element;\n};\nr.extend = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar clone = memoizeHTML(query);\n\n\treturn r.bind.apply(r, [ this, clone ].concat( args ));\n};\n\nconst component = function (o) {\n\tvar fn = o.view.toString().replace(STRIP_COMMENTS, '');\n\tvar match = FIND_L.exec(fn);\n\tvar output = [];\n\tvar cursor = 0;\n\n\twhile (match !== null) {\n\t\tvar n = match.index,\n\t\t\tall = match.input,\n\t\t\t_l = 1,\n\t\t\t_r = 0;\n\n\t\tconst len = all.length;\n\n\t\tfor (var i = n + 2; i < len; i++) {\n\t\t\tvar char = all.charCodeAt(i);\n\t\t\tif (char === RL) {\n\t\t\t\t_l += 1;\n\t\t\t} else\n\t\t\tif (char === RR) {\n\t\t\t\t_r += 1;\n\t\t\t}\n\t\t\tif (_l === _r) break;\n\t\t}\n\n\t\tvar found = all.substr(n, i + 1 - n);\n\n\t\tvar m = found.match(/[a-zA-Z_$]+(?:\\.\\w+(?:\\[.*\\])?)+/g) || [];\n\t\tvar obs = (m.length > 0) ? m.join('__ob__,') + '__ob__' : '';\n\t\tvar newString = 'l(function(){ return ' + found.substr(1) + '; },[' + obs + '], \"' + m.join(',') + '\")';\n\n\t\toutput.push(fn.substr(cursor, n - cursor));\n\t\toutput.push(newString);\n\t\tcursor = n + found.length;\n\n\t\tmatch = FIND_L.exec(fn);\n\t}\n\toutput.push(fn.substr(cursor, fn.length - cursor));\n\to.$view = output.join('');\n\n\treturn Component.bind(this, o);\n};\nvar Component = function Component (o) {\n\tthis.o = {\n\t\tname: o.name,\n\t\tstate: clone(o.state),\n\t\tprops: clone(o.props),\n\t\tactions: o.actions,\n\t\tview: o.view,\n\t\t$view: o.$view,\n\t};\n\n\tthis.__radi = function() { return new Radi(this.o); };\n};\nComponent.prototype.props = function props (p) {\n\tfor (var k in p) {\n\t\tif (typeof this.o.props[k] === 'undefined') {\n\t\t\tconsole.warn('[Radi.js] Warn: Creating a prop `', k, '` that is not defined in component');\n\t\t}\n\t\tthis.o.props[k] = p[k];\n\t}\n\treturn this;\n};\n\nconst mount = function (comp, id) {\n\tconst where = (id.constructor === String) ? document.getElementById(id) : id;\n\tvar out = (comp instanceof Component) ? comp.__radi().$render() : comp;\n\twhere.appendChild(out);\n\treturn out;\n};\n\nvar emptyNode = text('');\n\nconst list = function (data, act) {\n\tif (!data) return '';\n\tvar SELF = this;\n\n\tvar link, fragment = document.createDocumentFragment(), toplink = emptyNode.cloneNode();\n\n\tfragment.appendChild(toplink);\n\n\tvar inst = data.get();\n\n\tif (isArray(inst)) {\n\t\tfor (var i = 0; i < inst.length; i++) {\n\t\t\tinst[i+'__ob__'].watch((v) => {});\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, inst[i], i)\n\t\t\t);\n\t\t}\n\t} else {\n\t\tvar i = 0;\n\t\tfor (var key in inst) {\n\t\t\tinst[i+'__ob__'].watch((v) => {});\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, inst[key], key, i)\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t}\n\n\tlink = fragment.lastChild;\n\n\tvar w = function(a, b) {\n\t\tif (a > 0) {\n\t\t\tvar start = b.length - a;\n\t\t\tfor (var i = start; i < b.length; i++) {\n\t\t\t\tb[i+'__ob__'].watch((v) => {});\n\t\t\t\tfragment.appendChild(\n\t\t\t\t\tact.call(SELF, b[i], i)\n\t\t\t\t);\n\t\t\t}\n\t\t\tvar temp = fragment.lastChild;\n\t\t\tlink.parentElement.insertBefore(fragment, link.nextSibling);\n\t\t\tlink = temp;\n\t\t} else\n\t\tif (a < 0) {\n\t\t\tfor (var i = 0; i < Math.abs(a); i++) {\n\t\t\t\tvar templink = link.previousSibling;\n\t\t\t\tlink.parentElement.removeChild(link);\n\t\t\t\tlink = templink;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (data.watch) data.watch(w);\n\tif (data.get && data.get()._r_get) data.get()._r_get(w);\n\n\treturn fragment;\n};\n\nconst link = function (fn, watch, txt) {\n\tvar args = { s: null }, SELF = this, n, f = fn.bind(this);\n\n\tif (txt.length === 1 && fn.toString()\n\t\t\t\t.replace(/(function \\(\\)\\{ return |\\(|\\)|\\; \\})/g, '')\n\t\t\t\t.trim() === txt[0]) {\n\t\treturn watch[0];\n\t}\n\n\tfor (var i = 0; i < watch.length; i++) {\n\t\tif (isWatchable(watch[i])) {\n\t\t\tn = true;\n\t\t\twatch[i].watch(function () {\n\t\t\t\targs.s = f(SELF);\n\t\t\t});\n\t\t}\n\t}\n\n\targs.s = f(SELF);\n\n\tif (!n) return args.s;\n\treturn watchable(args, 's');\n};\n\nconst cond = function (a, e) {\n\treturn new Condition(a, e)\n};\nvar Condition = function Condition (a, e) {\n\tthis.cases = [{a:a,e:e}];\n\tthis.w = [];\n\tthis.els = emptyNode.cloneNode();\n\n\tif (isWatchable(a)) { this.w.push(a); }\n\n\tthis.watch = function(cb) {\n\t\tfor (var w in this.w) {\n\t\t\tthis.w[w].watch(cb);\n\t\t}\n\t};\n\n\tthis.__do = function() {\n\t\tvar ret = {id: null};\n\t\tfor (var c in this.cases) {\n\t\t\tvar a = isWatchable(this.cases[c].a) ? this.cases[c].a.get() : this.cases[c].a;\n\t\t\tif (a) {\n\t\t\t\tret.id = c;\n\t\t\t\tret.r = this.cases[c].e;\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (typeof ret.r === 'undefined') ret.r = this.els;\n\t\treturn ret\n\t};\n};\nCondition.prototype.elseif = function (a, e) {\n\tthis.cases.push({a:a,e:e});\n\tif (isWatchable(a)) { this.w.push(a); }\n\treturn this\n};\nCondition.prototype.cond = Condition.prototype.elseif;\nCondition.prototype.else = function (e) {\n\tthis.els = e;\n\treturn this\n};\n\nconst l = function (f, w, c) {\n\tif (!w) {\n\t\treturn f\n\t} else {\n\t\treturn link.call(this, f, w, c.split(','))\n\t}\n};\n\nconst freeze = () => { frozenState = true; };\nconst unfreeze = () => {\n\tfrozenState = false;\n\n\tfor (var ii = 0; ii < activeComponents.length; ii++) {\n\t\tif (typeof activeComponents[ii].onMount === 'function') {\n\t\t\tactiveComponents[ii].onMount.call(activeComponents[ii]);\n\t\t}\n\t}\n};\n\nexports.version = version;\nexports.activeComponents = activeComponents;\nexports.text = text;\nexports.r = r;\nexports.component = component;\nexports.mount = mount;\nexports.list = list;\nexports.link = link;\nexports.cond = cond;\nexports.l = l;\nexports.freeze = freeze;\nexports.unfreeze = unfreeze;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=radi.js.map\n"]}
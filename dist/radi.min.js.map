{"version":3,"sources":["dist/radi.js"],"names":["global","factory","exports","module","define","amd","radi","this","STRIP_COMMENTS","FIND_L","RL","charCodeAt","RR","HASH","DOT","frozenState","_op","Object","prototype","isObject","o","__proto__","isArray","Array","deepClone2","obj","i","ret","toString","call","len","length","hasOwnProperty","defineProperties","relocate","configurable","enumerable","value","what","wit","key","end","change","Radi","constructor","populateOne","writable","arrayProxy","l1","arr","apply","arguments","l2","diff","_r_set","arrayRules","item","def","bucket","v","_r_get","cb","push","pop","splice","shift","unshift","reverse","ii","__r","watchable","populate","data","prop","Watchable","temp","watch","c","watcher","p","prev","next","get","dsc","getOwnPropertyDescriptor","targ","handler","set","createElement","query","ns","ref","tag","id","className","mode","buffer","char","isHash","isDot","parseQuery","element","document","createElementNS","setAttribute","arg","ids","activeComponents","[object Object]","state","props","actions","view","$id","$this","SELF","k","Error","isWatchable","a","act","$name","name","$state","$props","$actions","$html","createDocumentFragment","$view","Function","r","bind","list","l","cond","$link","Component","appendChild","destroy","oldRootElem","parentElement","newRootElem","cloneNode","parentNode","insertBefore","unmount","removeChild","mount","onMount","onDestroy","remount","link","out","setStyle","arg1","arg2","el","getEl","style","undefined","isString","setAttr","self","isFunction","e","parent","nodeType","isNumber","isNode","isCondition","Condition","isComponent","__radi","text","str","createTextNode","radiArgs","args","__do","b","replaceChild","z","htmlCache","memoizeHTML","extend","clone","concat","component","fn","replace","match","exec","output","cursor","n","index","all","input","_l","_r","found","substr","m","obs","join","newString","console","warn","comp","where","String","getElementById","emptyNode","fragment","toplink","inst","lastChild","w","nextSibling","Math","abs","templink","previousSibling","txt","s","f","trim","cases","els","elseif","else","split","window","freeze","unfreeze","version"],"mappings":"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","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.radi = {})));\n}(this, (function (exports) { 'use strict';\n\nconst version = '0.0.2';\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar FIND_L = /\\bl\\(/g;\n\nvar RL = '('.charCodeAt(0);\nvar RR = ')'.charCodeAt(0);\nvar HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAGNAME = 0;\nvar ID = 1;\nvar CLASSNAME = 2;\n\nvar frozenState = false;\n\nvar _op = Object.prototype;\nvar isObject = function (o) { return o && o.__proto__ === _op };\nvar isArray = function (o) { return Array.isArray(o) === true };\n\nfunction deepClone2(obj) {\n\tvar i, ret;\n\tif (typeof obj === \"object\") {\n\t\tif (obj === null) return obj;\n\t\tif (Object.prototype.toString.call(obj) === \"[object Array]\") {\n\t\t\tvar len = obj.length;\n\t\t\tret = new Array(len);\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (typeof obj[i] === \"object\") {\n\t\t\t\t\tret[i] = deepClone2(obj[i]);\n\t\t\t\t} else {\n\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tret = {};\n\t\t\tfor (i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\t\tif (typeof(obj[i] === \"object\")) {\n\t\t\t\t\t\tret[i] = deepClone2(obj[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tret[i] = obj[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tret = obj;\n\t}\n\n\treturn ret;\n}\n\nObject.defineProperties(Object, {\n\trelocate: {\n\t\tconfigurable: true,\n\t\tenumerable: false,\n\t\tvalue: function relocate(what, wit) {\n\t\t\tfor (var key in wit) {\n\t\t\t\tconst end = wit[key];\n\t\t\t\tvar change = false;\n\t\t\t\tif (end && typeof end === 'object' && !(end instanceof Radi)) {\n\t\t\t\t\tif (typeof what[key] === 'undefined') what[key] = end.constructor();\n\t\t\t\t\tObject.relocate(what[key], end);\n\t\t\t\t\tchange = true;\n\t\t\t\t} else {\n\t\t\t\t\tif (what[key] !== end) {\n\t\t\t\t\t\tchange = true;\n\t\t\t\t\t\twhat[key] = end;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (change) populateOne(what, key);\n\t\t\t}\n\t\t},\n\t\twritable: true\n\t}\n});\n\nvar arrayProxy = function arrayProxy() {\n\tvar l1 = this[0].length,\n\t\t\tarr = deepClone2(this[0]),\n\t\t\t// arr = this[0],\n\t\t\tret = Array.prototype[this[1]].apply(arr, arguments),\n\t\t\tl2 = arr.length,\n\t\t\tdiff = l2 - l1;\n\n\tthis[0].length = l2;\n\n\tif (diff < 0) {\n\t\tfor (var i = l1; i > l1 + diff; i--) {\n\t\t\tdelete this[0][(i-1)+'__ob__'];\n\t\t\tdelete this[0][(i-1)];\n\t\t}\n\t}\n\n\tObject.relocate(this[0], arr);\n\n\tif (diff !== 0) {\n\t\tthis[0]._r_set(diff, this[0]);\n\t}\n\n\treturn ret\n};\n\nvar arrayRules = function arrayRules(item, def) {\n\t// TODO: Creaete _r_set loop with array of bucket\n\t// var bucket = []\n\tvar bucket = () => {};\n\tdef._r_set = { value: function (v) { if (frozenState) return false; bucket(v, item); } };\n\tdef._r_get = { value: function (cb) { bucket = cb; } };\n\tdef.push = { value: function () { return arrayProxy.apply([this, 'push'], arguments) } };\n\tdef.pop = { value: function () { return arrayProxy.apply([this, 'pop'], arguments) } };\n\tdef.splice = { value: function () { return arrayProxy.apply([this, 'splice'], arguments) } };\n\tdef.shift = { value: function () { return arrayProxy.apply([this, 'shift'], arguments) } };\n\tdef.unshift = { value: function () { return arrayProxy.apply([this, 'unshift'], arguments) } };\n\tdef.reverse = { value: function () { return arrayProxy.apply([this, 'reverse'], arguments) } };\n};\n\nvar populateOne = function populateOne(item, ii) {\n\tif (typeof item[ii + '__ob__'] !== 'undefined') return false\n\n\tvar def = { __r: { value: true } };\n\n\t// If input is an Array\n\tif (isArray(item) && typeof item.__r === 'undefined' && !item.__r) {\n\t\tarrayRules(item, def);\n\t}\n\n\tdef[ii + '__ob__'] = { value: watchable(item, ii), configurable: true };\n\n\tif (typeof item[ii] === 'object') populate(item[ii]);\n\n\treturn Object.defineProperties(item, def)\n};\n\n// Add watchers to every object and array\nvar populate = function populate(item) {\n\tif (item && typeof item === 'object') {\n\t\tvar def = { __r: { value: true } };\n\n\t\t// If input is an Array\n\t\tif (isArray(item)) {\n\t\t\tif (typeof item.__r === 'undefined' && !item.__r) {\n\t\t\t\tarrayRules(item, def);\n\t\t\t}\n\n\t\t\tfor (var ii in item) {\n\t\t\t\t// Add watchable\n\t\t\t\t// Should not be able to reconfigure this\n\t\t\t\tif (typeof item[ii + '__ob__'] === 'undefined') {\n\t\t\t\t\tdef[ii + '__ob__'] = { value: watchable(item, ii), configurable: true };\n\t\t\t\t\tpopulate(item[ii]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else\n\t\t// If input is an Object\n\t\tif (isObject(item)) {\n\n\t\t\tfor (var ii in item) {\n\t\t\t\t// Add watchable\n\t\t\t\t// Should not be able to reconfigure this\n\t\t\t\tif (typeof item[ii + '__ob__'] === 'undefined') {\n\t\t\t\t\tdef[ii + '__ob__'] = { value: watchable(item, ii), configurable: true };\n\t\t\t\t\tpopulate(item[ii]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn Object.defineProperties(item, def)\n\t} else { return false }\n};\n\nvar watchable = function (data, prop) { return new Watchable(data, prop) };\n\nvar Watchable = function Watchable (data, prop) {\n\tvar temp = data;\n\n\tthis.watch = function watch (c) {\n\t\twatcher(temp, prop, (p, prev, next) => {\n\t\t\tc(next, prev);\n\t\t\treturn next\n\t\t});\n\t};\n\n\tthis.prop = prop;\n\tthis.data = function data () {\n\t\treturn temp\n\t};\n\n\tthis.get = function get () {\n\t\treturn temp[prop]\n\t};\n};\n\nvar dsc = Object.getOwnPropertyDescriptor;\nvar watcher = function watcher(targ, prop, handler) {\n\tvar oldval = targ[prop],\n\t\tprev = (typeof dsc(targ, prop) !== 'undefined') ? dsc(targ, prop).set : null,\n\t\tsetter = function (newval) {\n\t\t\tif (frozenState) return false\n\t\t\tif (oldval !== newval) {\n\t\t\t\tif (isObject(newval)) {\n\n\t\t\t\t\tObject.relocate(oldval, newval);\n\t\t\t\t} else\n\t\t\t\tif (isArray(newval)) {\n\t\t\t\t\tvar diff = newval.length - oldval.length;\n\t\t\t\t\toldval.length = newval.length;\n\n\t\t\t\t\tObject.relocate(oldval, newval);\n\t\t\t\t\tnewval = diff;\n\t\t\t\t} else {\n\t\t\t\t\toldval = newval;\n\t\t\t\t}\n\t\t\t\tif (typeof prev === 'function') prev(newval);\n\t\t\t\thandler.call(targ, prop, oldval, newval);\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t};\n\n\tif (delete targ[prop]) {\n\t\tObject.defineProperty(targ, prop, {\n\t\t\tget: function () {\n\t\t\t\treturn oldval;\n\t\t\t},\n\t\t\tset: setter,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t}\n};\n\n\nvar parseQuery = function (query) {\n\tvar tag = null;\n\tvar id = null;\n\tvar className = null;\n\tvar mode = TAGNAME;\n\tvar buffer = '';\n\n\tfor (var i = 0; i <= query.length; i++) {\n\t\tvar char = query.charCodeAt(i);\n\t\tvar isHash = char === HASH;\n\t\tvar isDot = char === DOT;\n\t\tvar isEnd = !char;\n\n\t\tif (isHash || isDot || isEnd) {\n\t\t\tif (mode === TAGNAME) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\ttag = 'div';\n\t\t\t\t} else {\n\t\t\t\t\ttag = buffer;\n\t\t\t\t}\n\t\t\t} else if (mode === ID) {\n\t\t\t\tid = buffer;\n\t\t\t} else {\n\t\t\t\tif (className) {\n\t\t\t\t\tclassName += ' ' + buffer;\n\t\t\t\t} else {\n\t\t\t\t\tclassName = buffer;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isHash) {\n\t\t\t\tmode = ID;\n\t\t\t} else if (isDot) {\n\t\t\t\tmode = CLASSNAME;\n\t\t\t}\n\n\t\t\tbuffer = '';\n\t\t} else {\n\t\t\tbuffer += query[i];\n\t\t}\n\t}\n\n\treturn { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n\tvar ref = parseQuery(query);\n\tvar tag = ref.tag;\n\tvar id = ref.id;\n\tvar className = ref.className;\n\tvar element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n\tif (id) {\n\t\telement.id = id;\n\t}\n\n\tif (className) {\n\t\tif (ns) {\n\t\t\telement.setAttribute('class', className);\n\t\t} else {\n\t\t\telement.className = className;\n\t\t}\n\t}\n\n\treturn element;\n};\n\nif (!Array.isArray) {\n\tArray.isArray = function(arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\n\nvar ids = 0;\nconst activeComponents = [];\n\nclass Radi {\n\tconstructor(o) {\n\t\tvar state = o.state || {},\n\t\t\tprops = o.props || {},\n\t\t\tactions = o.actions || {},\n\t\t\tview = o.view;\n\n\t\tthis.$id = ids++;\n\n\t\tthis.$this = {};\n\t\tvar SELF = this.$this;\n\n\t\tfor (var k in state) {\n\t\t\tif (typeof SELF[k] === 'undefined') {\n\t\t\t\tSELF[k] = state[k];\n\t\t\t} else {\n\t\t\t\tthrow new Error('[Radi.js] Err: Trying to write state for reserved variable `' + k + '`');\n\t\t\t}\n\t\t}\n\n\t\tfor (var k in props) {\n\t\t\tif (typeof SELF[k] === 'undefined') {\n\t\t\t\tif (isWatchable(props[k])) {\n\t\t\t\t\tSELF[k] = props[k].get();\n\t\t\t\t\tprops[k].watch(function (a) {\n\t\t\t\t\t\tSELF[k] = a;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tSELF[k] = props[k];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('[Radi.js] Err: Trying to write prop for reserved variable `' + k + '`');\n\t\t\t}\n\t\t}\n\n\t\tpopulate(SELF);\n\t\tfor (var k in actions) {\n\t\t\tif (typeof SELF[k] === 'undefined') {\n\t\t\t\tconst act = actions[k];\n\t\t\t\tSELF[k] = function () { return (frozenState) ? function () {} : act.apply(SELF, arguments) };\n\n\t\t\t\t(function(SELF, k) {\n\t\t\t\t\tObject.defineProperty(SELF[k], 'props', {\n\t\t\t\t\t\tvalue() {\n\t\t\t\t\t\t\tvar args = arguments;\n\t\t\t\t\t\t\treturn function () { return (frozenState) ? function () {} : SELF[k].apply(SELF, args, arguments) }\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})(SELF, k);\n\t\t\t} else {\n\t\t\t\tthrow new Error('[Radi.js] Error: Trying to write action for reserved variable `' + k + '`');\n\t\t\t}\n\t\t}\n\n\t\tSELF.$id = this.$id;\n\t\tSELF.$name = o.name;\n\t\tSELF.$state = state;\n\t\tSELF.$props = props;\n\t\tSELF.$actions = actions;\n\t\t// SELF.$data = data;\n\n\t\tthis.$html = document.createDocumentFragment();\n\n\t\tthis.$view = new Function(\n\t\t\t'r',\n\t\t\t'list',\n\t\t\t'l',\n\t\t\t'cond',\n\t\t\t// 'return ' + output\n\t\t\t'return ' + o.$view\n\t\t)(\n\t\t\tr.bind(SELF),\n\t\t\tlist.bind(SELF),\n\t\t\tl.bind(SELF),\n\t\t\tcond.bind(SELF)\n\t\t);\n\n\t\t// console.log(this.$view);\n\n\t\tthis.$link = this.$view.apply(SELF);\n\n\t\tif (this.$link instanceof Component || Array.isArray(this.$link)) {\n\t\t\tthis.$link = r.call(SELF, null, this.$link);\n\t\t}\n\t\tthis.$html.appendChild(this.$link);\n\n\t\tthis.$html.destroy = (function () {\n\t\t\tconst oldRootElem = this.$link.parentElement;\n\t\t\tconst newRootElem = oldRootElem.cloneNode(false);\n\t\t\toldRootElem.parentNode.insertBefore(newRootElem, oldRootElem);\n\t\t\tthis.unmount();\n\t\t\toldRootElem.parentNode.removeChild(oldRootElem);\n\t\t}).bind(this);\n\n\t\tthis.mount = function () {\n\t\t\tif (typeof actions.onMount === 'function') {\n\t\t\t\tactions.onMount.call(SELF);\n\t\t\t}\n\t\t\tactiveComponents.push(this);\n\t\t};\n\n\t\tthis.unmount = function () {\n\t\t\tif (typeof actions.onDestroy === 'function') {\n\t\t\t\tactions.onDestroy.call(SELF);\n\t\t\t}\n\t\t\tfor (var i = 0; i < activeComponents.length; i++) {\n\t\t\t\tif (activeComponents[i].$id === this.$id) {\n\t\t\t\t\tactiveComponents.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.$link;\n\t\t};\n\t}\n\n\tget remount() {\n\t\tthis.mount();\n\t\treturn this.link;\n\t}\n\n\tget out() {\n\t\tthis.mount();\n\t\treturn this.$html;\n\t}\n}\n\nvar radiMutate = function (c) {\n\t// window.requestAnimationFrame(() => {\n\t\t// window.requestAnimationFrame(() => {\n\t\t\tc();\n\t\t// });\n\t// });\n};\n\nvar setStyle = function (view, arg1, arg2) {\n\tvar el = getEl(view);\n\n\tif (isWatchable(arg2)) {\n\t\tel.style[arg1] = arg2.get();\n\t\t// Update bind\n\t\targ2.watch((a) => {\n\t\t\tradiMutate(() => {\n\t\t\t\tel.style[arg1] = a;\n\t\t\t});\n\t\t});\n\t} else if (arg2 !== undefined) {\n\t\tel.style[arg1] = arg2;\n\t} else if (isString(arg1)) {\n\t\tel.setAttribute('style', arg1);\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetStyle(el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar setAttr = function (view, arg1, arg2) {\n\tvar self = this;\n\tvar el = getEl(view);\n\n\tif (arg2 !== undefined) {\n\t\tif (arg1 === 'style') {\n\t\t\tsetStyle(el, arg2);\n\t\t} else if (arg1 === 'model' && isWatchable(arg2)) {\n\t\t\tel.value = arg2.get();\n\t\t\tel['oninput'] = function () { arg2.data()[arg2.prop] = el.value; };\n\t\t\targ2.watch(function (a) {\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tel.value = a;\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (isFunction(arg2)) {\n\t\t\tel[arg1] = function (e) { arg2.call(self, e); };\n\t\t} else if (isWatchable(arg2)) {\n\t\t\tel.setAttribute(arg1, arg2.get());\n\t\t\t// Update bind\n\t\t\targ2.watch(function (a) {\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tel.setAttribute(arg1, a);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tel.setAttribute(arg1, arg2);\n\t\t}\n\t} else {\n\t\tfor (var key in arg1) {\n\t\t\tsetAttr.call(this, el, key, arg1[key]);\n\t\t}\n\t}\n};\n\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\nvar isWatchable = function (a) { return a && a instanceof Watchable; };\nvar isCondition = function (a) { return a && a instanceof Condition; };\nvar isComponent = function (a) { return a && a.__radi; };\n\nconst text = function (str) { return document.createTextNode(str); };\n\nvar radiArgs = function (element, args) {\n\tfor (var i = 0; i < args.length; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (arg !== 0 && !arg) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// support middleware\n\t\tif (isComponent(arg)) {\n\t\t\telement.appendChild(arg.__radi().out);\n\t\t} else if (isCondition(arg)) {\n\t\t\tvar arg2 = arg.__do(), a, id = arg2.id;\n\t\t\tif (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\ta = text(arg2.r);\n\t\t\t} else {\n\t\t\t\ta = arg2.r;\n\t\t\t}\n\t\t\telement.appendChild(a);\n\t\t\t(function(arg){arg.watch(function(v) {\n\t\t\t\tvar arg2 = arg.__do(), b;\n\t\t\t\tif (id === arg2.id) return false\n\t\t\t\tif (isString(arg2.r) || isNumber(arg2.r)) {\n\t\t\t\t\tb = text(arg2.r);\n\t\t\t\t} else {\n\t\t\t\t\tb = arg2.r;\n\t\t\t\t}\n\t\t\t\ta.parentNode.replaceChild(b, a);\n\t\t\t\ta = b;\n\t\t\t\tid = arg2.id;\n\t\t\t});})(arg);\n\t\t} else if (typeof arg === 'function') {\n\t\t\targ.call(this, element);\n\t\t} else if (isString(arg) || isNumber(arg)) {\n\t\t\telement.appendChild(text(arg));\n\t\t} else if (isNode(getEl(arg))) {\n\t\t\telement.appendChild(arg);\n\t\t} else if (Array.isArray(arg)) {\n\t\t\tradiArgs.call(this, element, arg);\n\t\t} else if (isWatchable(arg)) {\n\t\t\tlet z = text(arg.get());\n\t\t\telement.appendChild(z);\n\t\t\t// Update bind\n\t\t\targ.watch(function (a) {\n\t\t\t\tradiMutate(() => {\n\t\t\t\t\tz.textContent = a;\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (typeof arg === 'object') {\n\t\t\tsetAttr.call(this, element, arg);\n\t\t}\n\n\t}\n};\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nconst r = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar element;\n\n\tif (isString(query)) {\n\t\telement = memoizeHTML(query).cloneNode(false);\n\t} else if (isNode(query)) {\n\t\telement = query.cloneNode(false);\n\t} else {\n\t\telement = document.createDocumentFragment();\n\t}\n\n\tradiArgs.call(this, element, args);\n\n\treturn element;\n};\n\nr.extend = function (query) {\n\tvar args = [], len = arguments.length - 1;\n\twhile ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n\tvar clone = memoizeHTML(query);\n\n\treturn r.bind.apply(r, [ this, clone ].concat( args ));\n};\n\nconst component = function (o) {\n\tvar fn = o.view.toString().replace(STRIP_COMMENTS, '');\n\tvar match = FIND_L.exec(fn);\n\tvar output = [];\n\tvar cursor = 0;\n\n\twhile (match !== null) {\n\t\tvar n = match.index;\n\t\tvar all = match.input;\n\n\t\tconst len = all.length;\n\t\tvar _l = 1, _r = 0;\n\t\tfor (var i = n + 2; i < len; i++) {\n\t\t\tvar char = all.charCodeAt(i);\n\t\t\tif (char === RL) {\n\t\t\t\t_l += 1;\n\t\t\t} else\n\t\t\tif (char === RR) {\n\t\t\t\t_r += 1;\n\t\t\t}\n\t\t\tif (_l === _r) break;\n\t\t}\n\n\t\tvar found = all.substr(n, i + 1 - n);\n\n\t\tvar m = found.match(/[a-zA-Z_$]+(?:\\.\\w+(?:\\[.*\\])?)+/g) || [];\n\t\tvar obs = (m.length > 0) ? m.join('__ob__,') + '__ob__' : '';\n\t\tvar newString = 'l(function(){ return ' + found.substr(1) + '; },[' + obs + '], \"' + m.join(',') + '\")';\n\n\t\toutput.push(fn.substr(cursor, n - cursor));\n\t\toutput.push(newString);\n\t\tcursor = n + found.length;\n\n\t\tmatch = FIND_L.exec(fn);\n\t}\n\toutput.push(fn.substr(cursor, fn.length - cursor));\n\to.$view = output.join('');\n\n\treturn Component.bind(this, o);\n};\nvar Component = function Component (o) {\n\tthis.o = {\n\t\tname: o.name,\n\t\tstate: deepClone2(o.state),\n\t\t// state: Object.clone(o.state),\n\t\tprops: deepClone2(o.props),\n\t\t// props: Object.clone(o.props),\n\t\tactions: o.actions,\n\t\tview: o.view,\n\t\t$view: o.$view,\n\t};\n\n\tthis.__radi = function() { return new Radi(this.o); };\n};\nComponent.prototype.props = function props (p) {\n\tfor (var k in p) {\n\t\tif (typeof this.o.props[k] === 'undefined') {\n\t\t\tconsole.warn('[Radi.js] Warn: Creating a prop `', k, '` that is not defined in component');\n\t\t}\n\t\tthis.o.props[k] = p[k];\n\t}\n\treturn this;\n};\n\nconst mount = function (comp, id) {\n\tconst where = (id.constructor === String) ? document.getElementById(id) : id;\n\tvar out = (comp instanceof Component) ? comp.__radi().out : comp;\n\twhere.appendChild(out);\n\treturn out;\n};\n\nvar emptyNode = text('');\n\nconst list = function (data, act) {\n\tif (!data) return '';\n\tvar SELF = this;\n\n\tvar link, fragment = document.createDocumentFragment(), toplink = emptyNode.cloneNode();\n\n\tfragment.appendChild(toplink);\n\n\tvar inst = data.get();\n\n\tif (isArray(inst)) {\n\t\tfor (var i = 0; i < inst.length; i++) {\n\t\t\tinst[i+'__ob__'].watch((v) => {});\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, inst[i], i)\n\t\t\t);\n\t\t}\n\t} else {\n\t\tvar i = 0;\n\t\tfor (var key in inst) {\n\t\t\tinst[i+'__ob__'].watch((v) => {});\n\t\t\tfragment.appendChild(\n\t\t\t\tact.call(SELF, inst[key], key, i)\n\t\t\t);\n\t\t\ti++;\n\t\t}\n\t}\n\n\tlink = fragment.lastChild;\n\n\tvar w = function(a, b) {\n\t\tif (a > 0) {\n\t\t\tvar start = b.length - a;\n\t\t\tfor (var i = start; i < b.length; i++) {\n\t\t\t\tb[i+'__ob__'].watch((v) => {});\n\t\t\t\tfragment.appendChild(\n\t\t\t\t\tact.call(SELF, b[i], i)\n\t\t\t\t);\n\t\t\t}\n\t\t\tvar temp = fragment.lastChild;\n\t\t\tlink.parentElement.insertBefore(fragment, link.nextSibling);\n\t\t\tlink = temp;\n\t\t} else\n\t\tif (a < 0) {\n\t\t\tfor (var i = 0; i < Math.abs(a); i++) {\n\t\t\t\tvar templink = link.previousSibling;\n\t\t\t\tlink.parentElement.removeChild(link);\n\t\t\t\tlink = templink;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (data.watch) data.watch(w);\n\tif (data.get && data.get()._r_get) data.get()._r_get(w);\n\n\treturn fragment;\n};\n\nconst link = function (fn, watch, txt) {\n\tvar args = { s: null }, SELF = this, n, f = fn.bind(this);\n\n\tif (txt.length === 1 && fn.toString()\n\t\t\t\t.replace(/(function \\(\\)\\{ return |\\(|\\)|\\; \\})/g, '')\n\t\t\t\t.trim() === txt[0]) {\n\t\treturn watch[0];\n\t}\n\n\tfor (var i = 0; i < watch.length; i++) {\n\t\tif (isWatchable(watch[i])) {\n\t\t\tn = true;\n\t\t\twatch[i].watch(function () {\n\t\t\t\targs.s = f(SELF);\n\t\t\t});\n\t\t}\n\t}\n\n\targs.s = f(SELF);\n\n\tif (!n) return args.s;\n\treturn watchable(args, 's');\n};\n\nconst cond = function (a, e) {\n\treturn new Condition(a, e)\n};\nvar Condition = function Condition (a, e) {\n\tthis.cases = [{a:a,e:e}];\n\tthis.w = [];\n\tthis.els = emptyNode.cloneNode();\n\n\tif (isWatchable(a)) { this.w.push(a); }\n\n\tthis.watch = function(cb) {\n\t\tfor (var w in this.w) {\n\t\t\tthis.w[w].watch(cb);\n\t\t}\n\t};\n\n\tthis.__do = function() {\n\t\tvar ret = {id: null};\n\t\tfor (var c in this.cases) {\n\t\t\tvar a = isWatchable(this.cases[c].a) ? this.cases[c].a.get() : this.cases[c].a;\n\t\t\tif (a) {\n\t\t\t\tret.id = c;\n\t\t\t\tret.r = this.cases[c].e;\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (typeof ret.r === 'undefined') ret.r = this.els;\n\t\treturn ret\n\t};\n};\nCondition.prototype.elseif = function (a, e) {\n\tthis.cases.push({a:a,e:e});\n\tif (isWatchable(a)) { this.w.push(a); }\n\treturn this\n};\nCondition.prototype.cond = Condition.prototype.elseif;\nCondition.prototype.else = function (e) {\n\tthis.els = e;\n\treturn this\n};\n\nvar l = function (f, w, c) {\n\tif (!w) {\n\t\treturn f\n\t} else {\n\t\treturn link.call(this, f, w, c.split(','))\n\t}\n};\n\n// For devtools\nwindow.radi = {\n\tfreeze: () => { frozenState = true; },\n\tunfreeze: () => {\n\t\tfrozenState = false;\n\n\t\tfor (var ii = 0; ii < activeComponents.length; ii++) {\n\t\t\tif (typeof activeComponents[ii].$this.onMount === 'function') {\n\t\t\t\tactiveComponents[ii].$this.onMount.call(activeComponents[ii].$this);\n\t\t\t}\n\t\t}\n\t},\n\tr: r,\n\tl: l,\n\tlist: list,\n\tversion: version,\n\tcomponent: component,\n\tmount: mount,\n\tactiveComponents: activeComponents\n};\n\nexports.version = version;\nexports.activeComponents = activeComponents;\nexports.text = text;\nexports.r = r;\nexports.component = component;\nexports.mount = mount;\nexports.list = list;\nexports.link = link;\nexports.cond = cond;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=radi.js.map\n"]}
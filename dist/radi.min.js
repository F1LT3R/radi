var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,e){a!=Array.prototype&&a!=Object.prototype&&(a[d]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var d,e=[];!(d=a.next()).done;)e.push(d.value);return e};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.polyfill=function(a,d,e,f){if(d){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var h=a[f];h in e||(e[h]={});e=e[h]}a=a[a.length-1];f=e[a];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Number.isNaN",function(a){return a?a:function(a){return"number"===typeof a&&isNaN(a)}},"es6","es3");$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,d){for(var e=1;e<arguments.length;e++){var f=arguments[e];if(f)for(var h in f)$jscomp.owns(f,h)&&(a[h]=f[h])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,e,f){$jscomp.initSymbolIterator();e=null!=e?e:function(a){return a};var d=[],l=a[Symbol.iterator];if("function"==typeof l)for(a=l.call(a);!(l=a.next()).done;)d.push(e.call(f,l.value));else{l=a.length;for(var m=0;m<l;m++)d.push(e.call(f,a[m]))}return d}},"es6","es3");$jscomp.polyfill("Object.values",function(a){return a?a:function(a){var d=[],f;for(f in a)$jscomp.owns(a,f)&&d.push(a[f]);return d}},"es8","es3");
(function(a,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports):"function"===typeof define&&define.amd?define(["exports"],d):d(a.radi={})})(this,function(a){var d={},e=!1,f={},h=function(b,c){for(var a=[],g=1;g<arguments.length;++g)a[g-1]=arguments[g];this.component=b;this.key=$jscomp.makeIterator(a).next().value;this.childPath=a.slice(1,a.length);this.value=null;this.changeListeners=[];this.processValue=function(b){return b};this.component.addListener(this.key,this);this.handleUpdate(this.component[this.key])};
h.prototype.handleUpdate=function(b){var c=this;this.value=this.processValue(this.getShallowValue(b),this.value);this.changeListeners.forEach(function(b){return b(c.value)})};h.prototype.onValueChange=function(b){this.changeListeners.push(b);b(this.value)};h.prototype.process=function(b){this.processValue=b;this.handleUpdate(this.value);return this};h.prototype.getShallowValue=function(b){if(!this.childPath)return b;for(var c=$jscomp.makeIterator(this.childPath),a=c.next();!a.done;a=c.next())b=b[a.value];
return b};var l=function(b){var c=b.listener,a=b.element;this.attributeKey=b.attributeKey;this.listener=c;this.element=a;this.attached=!1;this.handleValueChange=this.handleValueChange.bind(this)};l.prototype.attach=function(){this.element.attributeListeners||(this.element.attributeListeners=[]);this.element.attributeListeners.push(this);this.listener.onValueChange(this.handleValueChange);this.attached=!0;return this};l.prototype.handleValueChange=function(b){var c={};x(this.element,(c[this.attributeKey]=
b,c))};l.prototype.updateElement=function(b){return this.element=b};var m=function(b){var c=b.listener,a=b.element;this.styleKey=b.styleKey;this.listener=c;this.element=a;this.attached=!1;this.handleValueChange=this.handleValueChange.bind(this)};m.prototype.attach=function(){this.element.styleListeners||(this.element.styleListeners=[]);this.element.styleListeners.push(this);this.listener.onValueChange(this.handleValueChange);this.attached=!0;return this};m.prototype.handleValueChange=function(b){w(this.element,
this.styleKey,b)};m.prototype.updateElement=function(b){return this.element=b};var w=function(b,c,a){if("undefined"!==typeof a){if(a instanceof h)return(new m({styleKey:c,listener:a,element:b})).attach(),b[c];b=b.style;a="number"!==typeof a||Number.isNaN(a)?a:a+"px";return b[c]=a}},x=function(b,c){for(var a in c){var g=c[a];if("undefined"!==typeof g)if("style"===a){var d=void 0,e=b;"string"===typeof g&&(e.style=g);if("object"===typeof g&&!Array.isArray(g))if(g instanceof h)(new l({attributeKey:"style",
listener:g,element:e})).attach();else for(d in g)w(e,d,g[d])}else g instanceof h?(new l({attributeKey:a,listener:g,element:b})).attach():"on"===a.substring(0,2).toLowerCase()?b[a]=g:b.setAttribute(a,g)}},p=function(b){if("object"!==typeof b||null===b)return b;if(Array.isArray(b))return b.map(p);var c={},a;for(a in b)b.hasOwnProperty(a)&&(c[a]=p(b[a]));return c},A=function(){for(var b="",c=0;32>c;c++){var a=16*Math.random()|0;if(8===c||12===c||16===c||20===c)b+="-";b+=(12===c?4:16===c?a&3|8:a).toString(16)}return b},
r=function(b){this.component=b;this.html=document.createDocumentFragment();this.node={}};r.prototype.render=function(){var b=this;this.html.appendChild(this.node=this.component.$view);this.html.destroy=this.node.destroy=function(){return b.component.destroy()};return this.html};r.prototype.destroyHtml=function(){var b=this;this.node.childNodes&&this.node.childNodes.forEach(function(c){b.node.removeChild(c)});this.html.childNodes&&this.html.childNodes.forEach(function(c){b.html.removeChild(c)});this.html=
document.createDocumentFragment();return this.node={}};var n=function(){this.store={}};n.prototype.setItem=function(b,c){"undefined"===typeof this.store[b]&&this.createItemWrapper(b);this.store[b].value=c;this.triggerListeners(b);return c};n.prototype.getItem=function(b){return this.store[b].value};n.prototype.addListener=function(b,c){"undefined"===typeof this.store[b]&&this.createItemWrapper(b);this.store[b].listeners.push(c);c.handleUpdate(this.store[b].value);return c};n.prototype.createItemWrapper=
function(b){return this.store[b]={listeners:[],value:null}};n.prototype.triggerListeners=function(b){var c=this.store[b];c.listeners.forEach(function(b){return b.handleUpdate(c.value)})};var k=function(b,c){this.name=b.name;this.addNonEnumerableProperties(Object.assign({$id:A(),$mixins:b.mixins||{},$state:p(b.state||{}),$props:p(b.props||{}),$actions:b.actions||{},$privateStore:new n}));this.addCustomField("children",[]);c&&this.setChildren(c);this.copyObjToInstance(this.$mixins);this.copyObjToInstance(this.$state);
this.copyObjToInstance(this.$props);this.copyObjToInstance(d);this.copyObjToInstance(this.$actions,this.handleAction.bind(this));this.addNonEnumerableProperties({$view:b.view?b.view(this):function(){return function(){return null}},$renderer:new r(this)});this.$view.unmount=this.unmount.bind(this);this.$view.mount=this.mount.bind(this)};k.prototype.copyObjToInstance=function(b,c){c=void 0===c?function(b){return b}:c;for(var a in b){if("undefined"!==typeof this[a])throw Error("[Radi.js] Error: Trying to write for reserved variable `"+
a+"`");this.addCustomField(a,c(b[a]))}};k.prototype.handleAction=function(b){var a=this;return function(c){for(var g=[],d=0;d<arguments.length;++d)g[d-0]=arguments[d];return e?null:b.bind(a).apply(null,[].concat($jscomp.arrayFromIterable(g)))}};k.prototype.setProps=function(b){for(var a in b)this.$props[a]=b[a],"undefined"===typeof this.$props[a]?(console.warn("[Radi.js] Warn: Creating a prop `"+a+"` that is not defined in component"),this.addCustomField(a,b[a])):this[a]=b[a];return this};k.prototype.setChildren=
function(b){this.children=b;return this};k.prototype.addNonEnumerableProperties=function(b){for(var a in b)"undefined"===typeof this[a]&&Object.defineProperty(this,a,{value:b[a]})};k.prototype.addCustomField=function(b,a){var c=this;Object.defineProperty(this,b,{get:function(){return c.$privateStore.getItem(b)},set:function(a){return c.$privateStore.setItem(b,a)},enumerable:!0});this[b]=a};k.prototype.addListener=function(b,a){this.$privateStore.addListener(b,a)};k.prototype.isMixin=function(b){return"undefined"!==
typeof this.$mixins[b]};k.prototype.mount=function(){if("function"===typeof this.$actions.onMount)this.$actions.onMount(this);f[this.$id]=this};k.prototype.unmount=function(){if("function"===typeof this.$actions.onDestroy)this.$actions.onDestroy(this);delete f[this.$id]};k.prototype.render=function(){this.mount();return this.$renderer.render()};k.prototype.destroy=function(){this.unmount();return this.$renderer.destroyHtml()};k.isComponent=function(){return!0};var B=function(b){return Array.isArray(b)?
b:[b]},y=function(b){if(b instanceof DocumentFragment)return Array.from(b.childNodes).map(function(b){var a=b;b=a.cloneNode(!0);b.remove();return a});var a=document.createDocumentFragment();t(a,B(b));return y(a)},q=function(b){var a=b.element;this.listener=b.listener;this.element=a;this.listenerAsNode=[];this.attached=!1;this.handleValueChange=this.handleValueChange.bind(this)};q.prototype.attach=function(){this.element.listeners||(this.element.listeners=[]);this.element.listeners.push(this);this.listener.onValueChange(this.handleValueChange);
this.attached=!0;return this};q.prototype.handleValueChange=function(b){b=y(b);for(var a=$jscomp.makeIterator(b),d=a.next();!d.done;d=a.next())d=d.value,this.listenerAsNode[0]?this.element.insertBefore(d,this.listenerAsNode[0]):this.element.appendChild(d);a=$jscomp.makeIterator(this.listenerAsNode);for(d=a.next();!d.done;d=a.next()){d=d.value;for(var g=document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,function(b){return b&&"function"===typeof b.destroy},!1),e;e=g.nextNode();)e.destroy();d.remove()}this.listenerAsNode=
b};q.prototype.updateElement=function(b){return this.element=b};var u=function(b){return function(a){a||"number"===typeof a||(a="");if(a instanceof k)b.appendChild(a.render());else if(a instanceof h)(new q({listener:a,element:b})).attach();else if(Array.isArray(a))t(b,a);else if("function"===typeof a){var c=document.createElement("div"),d=b.appendChild(c);a().then(function(b){"function"===typeof b.default&&b.default.isComponent&&b.default.isComponent()?u(d)(new b.default):u(d)(b.default)}).catch(function(){})}else a instanceof
Node?b.appendChild(a):b.appendChild(document.createTextNode(a))}},t=function(b,a){a.forEach(u(b))},z=function(b,a){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return new (Function.prototype.bind.apply(h,[null].concat([b],$jscomp.arrayFromIterable(c))))},C=function(){Object.values(f).forEach(function(b){if("function"===typeof b.onMount)b.onMount(b)})},v={version:"0.2.0",activeComponents:f,r:function(b,a,d){for(var c=[],e=2;e<arguments.length;++e)c[e-2]=arguments[e];if("function"===
typeof b.isComponent&&b.isComponent())return(new b(c)).setProps(a||{});if("function"===typeof b)return e=a||{},e.children=c,b(e);"string"===typeof b?e=document.createElement(b):(console.warn("[Radi.js] Warn: Creating a JSX element whose query is not of type string, automatically converting query to string."),e=document.createElement(b.toString()));null!==a&&x(e,a);t(e,c);return e},listen:z,l:z,component:function(b){var a=function(a){return new k(b,a)};a.isComponent=function(){return!0};return a},
headless:function(a,c){c=new c;c.mount();return d["$".concat(a)]=c},mount:function(a,c){c="string"===typeof c?document.getElementById(c):c;a=a instanceof k?a.render():a;c.appendChild(a);return a},freeze:function(){e=!0},unfreeze:function(){e=!1;C()},plugin:function(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];return a.apply(null,[].concat([v],$jscomp.arrayFromIterable(b)))}};window&&(window.$Radi=v);a.Radi=v;Object.defineProperty(a,"__esModule",{value:!0})});
